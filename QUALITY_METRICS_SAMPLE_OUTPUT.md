# Quality Metrics Dashboard - Sample Output Examples

Complete sample outputs showing how Phase 7 system works with real data.

---

## 1. Weekly Report Generator - JSON Output

**Command**:
```bash
python scripts/generate_quality_report.py --format json --output quality_report_2025_11_05.json
```

**Sample JSON Output**:
```json
{
  "report_date": "2025-11-05",
  "week_start": "2025-11-03",
  "week_end": "2025-11-09",
  "generated_at": "2025-11-05T14:32:15.123456",
  "code_quality": {
    "score": 90.5,
    "checks_total": 7,
    "checks_passed": 6,
    "checks_failed": 1,
    "status": "pass",
    "detailed_results": {
      "wildcard_imports": 0,
      "exception_handling": 2,
      "network_timeouts": 0,
      "code_injection": 0,
      "blocking_io": 1,
      "sys_path_manipulation": 0,
      "production_prints": 0
    }
  },
  "file_compliance": {
    "total_violations": 0,
    "critical": 0,
    "status": "pass",
    "details": "All files comply with size limits"
  },
  "test_coverage": {
    "percent_covered": 87.5,
    "lines_covered": 15420,
    "lines_total": 17652,
    "status": "pass",
    "target": 85.0
  },
  "complexity": {
    "average_complexity": 5.9,
    "files_analyzed": 156,
    "status": "pass",
    "target": 6.5
  },
  "security": {
    "total_issues": 2,
    "critical": 0,
    "high": 2,
    "status": "warning",
    "note": "2 high-severity issues found via static analysis"
  },
  "trends": {
    "code_quality_change": 2.5,
    "coverage_change": 1.2,
    "complexity_change": -0.3,
    "security_change": -1.0
  },
  "overall_grade": "A",
  "overall_score": 91.8,
  "recommendations": [
    "Security: 2 high severity issues found. Plan remediation in next sprint.",
    "Code Quality: 2 generic exception handlers detected. Use specific exception types per rules.md",
    "Code Quality: 1 blocking I/O pattern found. Replace time.sleep() with exponential backoff.",
    "All other metrics within acceptable ranges. Continue monitoring."
  ]
}
```

---

## 2. Weekly Report Generator - Markdown Output

**Command**:
```bash
python scripts/generate_quality_report.py --format markdown --output quality_report_2025_11_05.md
```

**Sample Markdown Output**:
```markdown
# Quality Metrics Report
**Generated:** 2025-11-05T14:32:15.123456
**Period:** 2025-11-03 to 2025-11-09
**Overall Grade: A (91.8/100)**

## Executive Summary
| Metric | Value | Target | Status |
|--------|-------|--------|--------|
| Code Quality Score | 90.5/100 | 90.0 | pass |
| Test Coverage | 87.5% | 85.0% | pass |
| Avg Complexity | 5.9 | 6.5 | pass |
| Security Issues | 2 | 0 | warning |
| File Violations | 0 | 0 | pass |

## Code Quality Details
- **Score:** 90.5/100
- **Checks Passed:** 6/7
- **Status:** pass

### Detailed Check Results
```json
{
  "wildcard_imports": 0,
  "exception_handling": 2,
  "network_timeouts": 0,
  "code_injection": 0,
  "blocking_io": 1,
  "sys_path_manipulation": 0,
  "production_prints": 0
}
```

## Test Coverage
- **Percent Covered:** 87.5%
- **Lines Covered:** 15,420 / 17,652
- **Target:** 85.0%
- **Status:** pass

## Code Complexity
- **Average Cyclomatic Complexity:** 5.9
- **Files Analyzed:** 156
- **Target:** 6.5
- **Status:** pass

## Security Analysis
- **Total Issues:** 2
- **Critical:** 0
- **High:** 2
- **Status:** warning

## File Compliance
- **Violations Found:** 0
- **Status:** pass

## Week-over-Week Trends
- **Code Quality Change:** +2.5
- **Coverage Change:** +1.2%
- **Complexity Change:** -0.3
- **Security Change:** -1.0

## Recommendations
1. Security: 2 high severity issues found. Plan remediation in next sprint.
2. Code Quality: 2 generic exception handlers detected. Use specific exception types per rules.md
3. Code Quality: 1 blocking I/O pattern found. Replace time.sleep() with exponential backoff.
4. All other metrics within acceptable ranges. Continue monitoring.

## Quality Standards Reference
- **.claude/rules.md** - Coding standards and rules
- **docs/architecture/SYSTEM_ARCHITECTURE.md** - Architecture guidelines
- **docs/testing/TESTING_AND_QUALITY_GUIDE.md** - Testing standards

---
*This report is auto-generated by Quality Metrics Dashboard (Agent 37)*
```

---

## 3. Prometheus Metrics Export

**Endpoint**: `GET http://localhost:8000/metrics/code-quality/`

**Sample Output**:
```
# HELP code_quality_score Overall code quality score (0-100)
# TYPE code_quality_score gauge
code_quality_score 90.5

# HELP test_coverage_percent Test code coverage percentage (0-100)
# TYPE test_coverage_percent gauge
test_coverage_percent 87.5

# HELP cyclomatic_complexity_average Average cyclomatic complexity across codebase
# TYPE cyclomatic_complexity_average gauge
cyclomatic_complexity_average 5.9

# HELP security_issues_total Total security issues found
# TYPE security_issues_total gauge
security_issues_total 2

# HELP security_issues_critical Critical severity security issues
# TYPE security_issues_critical gauge
security_issues_critical 0

# HELP security_issues_high High severity security issues
# TYPE security_issues_high gauge
security_issues_high 2

# HELP file_size_violations_total Number of file size compliance violations
# TYPE file_size_violations_total gauge
file_size_violations_total 0

# HELP quality_grade_numeric Overall quality grade (A=4, B=3, C=2, D=1, F=0)
# TYPE quality_grade_numeric gauge
quality_grade_numeric 4

# HELP code_quality_metrics_timestamp Timestamp when metrics were last collected
# TYPE code_quality_metrics_timestamp gauge
code_quality_metrics_timestamp 1730813535.123456

# HELP code_quality_collections_total Total successful metric collections
# TYPE code_quality_collections_total counter
code_quality_collections_total 156

# HELP code_quality_collection_errors_total Total failed metric collection attempts
# TYPE code_quality_collection_errors_total counter
code_quality_collection_errors_total 2
```

---

## 4. Database Storage - Django Model

**Command**:
```bash
python manage.py shell
```

**Sample Django Operations**:
```python
from apps.core.models import QualityMetric
from datetime import timedelta
from django.utils import timezone

# Get latest metrics
latest = QualityMetric.get_latest()
print(latest)
# Output: A - 2025-11-05 14:32

# Display current status
print(f"Grade: {latest.overall_grade}")
print(f"Score: {latest.overall_score:.1f}/100")
print(f"Coverage: {latest.test_coverage:.1f}%")
print(f"Is Passing: {latest.is_passing}")

# Get metrics for last week
week_ago = timezone.now() - timedelta(days=7)
weekly_metrics = QualityMetric.objects.filter(
    timestamp__gte=week_ago,
    is_weekly=True
).order_by('-timestamp')

print(f"\nWeekly metrics for last 7 days: {weekly_metrics.count()}")
for metric in weekly_metrics:
    print(f"  {metric.timestamp}: {metric.overall_grade} ({metric.overall_score:.1f})")

# Get 4-week trend analysis
trend = QualityMetric.get_weekly_average(weeks=4)
print(f"\n4-Week Trend Analysis:")
print(f"  Avg Code Quality: {trend['avg_code_quality']:.1f}%")
print(f"  Avg Coverage: {trend['avg_coverage']:.1f}%")
print(f"  Avg Complexity: {trend['avg_complexity']:.1f}")
print(f"  Total Security Issues: {trend['total_security_issues']}")
print(f"  Total Violations: {trend['total_violations']}")
```

**Sample Output**:
```
A - 2025-11-05 14:32
Grade: A
Score: 91.8/100
Coverage: 87.5%
Is Passing: True

Weekly metrics for last 7 days: 1
  2025-11-05 14:32:15+00:00: A (91.8)

4-Week Trend Analysis:
  Avg Code Quality: 89.2%
  Avg Coverage: 86.1%
  Avg Complexity: 6.0
  Total Security Issues: 8
  Total Violations: 0
```

---

## 5. Grafana Dashboard Visualization

**Dashboard URL**: `http://localhost:3000/d/code-quality-dashboard`

### Panel Displays

**1. Code Quality Score (Gauge)**
```
      ┌──────────────────┐
      │   Code Quality   │
      │      90.5        │
      │     /100         │
      │ ████████░░       │ ← Green zone (85+)
      └──────────────────┘
```

**2. Test Coverage (Gauge)**
```
      ┌──────────────────┐
      │   Test Coverage  │
      │      87.5%       │
      │   ██████████░░░  │ ← Green zone (85%+)
      └──────────────────┘
```

**3. Quality Metrics Trend (Time Series)**
```
100 ┤
    │                           ┌─ Code Quality
 90 ┤    ╱╲      ╱╲            ─┼─ Test Coverage
    │   ╱  ╲    ╱  ╲          │
 85 ┤  ╱    ╲  ╱    ╲         │
    │ ╱      ╲╱      ╲        │
 80 ┤                 ╲       │
    │                  ╲     ╱
 75 ┴──────────────────╲───╱──
    Week1   Week2   Week3  Week4
```

**4. Overall Grade (Gauge)**
```
      ┌──────────────────┐
      │    Overall       │
      │       A          │
      │   Excellent!     │
      │   █████████████  │
      └──────────────────┘
```

**5. Security Issues (Bars)**
```
6 ┤
5 ┤
4 ┤  ╔════╗
3 ┤  ║ 2  ║  ╔════╗
2 ┤  ║ 2  ║  ║ 1  ║  ╔════╗
1 ┤  ║ 1  ║  ║ 2  ║  ║ 2  ║
0 ┴──╚════╝──╚════╝──╚════╝──
   Week1   Week2   Week3   Week4
      ├─ Critical
      ├─ High
      └─ Medium
```

**6. File Size Compliance Trend (Line)**
```
5 ┤
4 ┤
3 ┤
2 ┤
1 ┤         ╱
0 ┴─────────╱──────────────
  Week1  Week2  Week3  Week4
```

---

## 6. Command Line Output Examples

### Running Report Generator
```bash
$ python scripts/generate_quality_report.py --format json --store-db

======================================================================
  QUALITY METRICS REPORT GENERATION
======================================================================

  Running code quality validation...
✅ Code Quality Score: 90.5/100
  Running file size compliance check...
✅ File Size Violations: 0
  Analyzing test coverage...
✅ Test Coverage: 87.5%
  Analyzing code complexity...
✅ Average Complexity: 5.9
  Running security analysis...
✅ Security Analysis: 2 issues (0 critical, 2 high)
  Calculating trends...
✅ Trend Calculation Complete
✅ Database Metrics Stored

Overall Grade: A (91.8/100)
Generated: 2025-11-05T14:32:15.123456

======================================================================
✅ Quality Report Generated Successfully
Overall Grade: A (91.8/100)
======================================================================
```

### Running Prometheus Metrics
```bash
$ python monitoring/prometheus/code_quality_metrics.py

Code Quality Metrics Collector
======================================================================

Collected Metrics:
------================================================================
  average_complexity: 5.90
  code_quality_score: 90.50
  complexity: 5.90
  files_analyzed: 156
  grade: A
  grade_numeric: 4
  security_critical: 0
  security_high: 2
  security_issues: 2
  test_coverage: 87.50
  timestamp: 1730813535.12

======================================================================

Prometheus Format Export:
----------------------------------------------------------------------
# HELP code_quality_score Overall code quality score (0-100)
# TYPE code_quality_score gauge
code_quality_score 90.5

# HELP test_coverage_percent Test code coverage percentage (0-100)
# TYPE test_coverage_percent gauge
test_coverage_percent 87.5
...
```

---

## 7. Database Query Examples

### Check Grade Trend
```sql
SELECT
    timestamp,
    overall_grade,
    overall_score,
    test_coverage,
    code_quality_score
FROM core_qualitymetric
WHERE is_weekly = true
ORDER BY timestamp DESC
LIMIT 10;
```

**Result**:
```
timestamp           | overall_grade | overall_score | test_coverage | code_quality_score
────────────────────┼───────────────┼───────────────┼───────────────┼──────────────────
2025-11-05 14:32   | A             | 91.8          | 87.5          | 90.5
2025-10-29 14:15   | A             | 89.3          | 86.3          | 88.0
2025-10-22 14:20   | B             | 88.5          | 85.1          | 85.5
2025-10-15 14:18   | B             | 87.2          | 84.9          | 84.0
2025-10-08 14:25   | C             | 79.1          | 78.5          | 75.0
```

### Check Security Trend
```sql
SELECT
    timestamp,
    security_issues,
    security_critical,
    security_high
FROM core_qualitymetric
WHERE is_weekly = true
ORDER BY timestamp DESC
LIMIT 5;
```

**Result**:
```
timestamp           | security_issues | security_critical | security_high
────────────────────┼─────────────────┼───────────────────┼──────────────
2025-11-05 14:32   | 2               | 0                 | 2
2025-10-29 14:15   | 3               | 0                 | 3
2025-10-22 14:20   | 4               | 1                 | 3
2025-10-15 14:18   | 5               | 1                 | 4
2025-10-08 14:25   | 8               | 2                 | 6
```

---

## 8. Alert Examples (Prometheus/Grafana)

### Critical Alert: Code Quality Drop
```
Alert: Code Quality Grade Drop
Severity: CRITICAL
Status: FIRING

Message:
  Code quality grade dropped from A to D
  Previous score: 88.5/100
  Current score: 65.2/100
  Change: -23.3 points

Action Required:
  1. Review code quality report
  2. Identify major code quality issues
  3. Prioritize fixes in sprint planning
```

### Warning Alert: Test Coverage Below Target
```
Alert: Low Test Coverage
Severity: WARNING
Status: FIRING

Message:
  Test coverage below target threshold
  Current: 78.5%
  Target: 85.0%
  Gap: -6.5%

Recommendations:
  1. Identify untested code paths
  2. Add unit tests for critical functions
  3. Review coverage reports for gaps
```

### Info Alert: Security Issues Detected
```
Alert: Security Issues Found
Severity: INFO
Status: FIRING

Message:
  Security scan detected issues
  Total: 3
  - Critical: 0
  - High: 3
  - Medium: 0

Action:
  Review detailed security report in monitoring system
```

---

## 9. Historical Comparison

### Week-over-Week Comparison
```
Period: 2025-10-29 to 2025-11-05

Metric                  Previous    Current    Change
────────────────────────────────────────────────────
Code Quality Score      88.0        90.5       +2.5
Test Coverage           86.3%       87.5%      +1.2%
Avg Complexity          6.2         5.9        -0.3
Security Issues         3           2          -1
File Violations         0           0          No change
Overall Grade           A           A          No change
Overall Score           89.3        91.8       +2.5

Trend: IMPROVING
────────────────────────────────────────────────────
```

### Monthly Trend
```
October 2025:
  Week 1 (Oct 1-7):   C | 79.1  → Issues: 8  | Coverage: 78.5%
  Week 2 (Oct 8-14):  B | 87.2  → Issues: 5  | Coverage: 84.9%
  Week 3 (Oct 15-21): B | 88.5  → Issues: 4  | Coverage: 85.1%
  Week 4 (Oct 22-28): A | 89.3  → Issues: 3  | Coverage: 86.3%

November 2025:
  Week 1 (Nov 1-7):   A | 91.8  → Issues: 2  | Coverage: 87.5%

Trend: STEADILY IMPROVING - Grade improved from C to A
```

---

## 10. API Integration Example

### Querying Latest Metrics via Django ORM
```python
from apps.core.models import QualityMetric

# Get latest metrics
latest = QualityMetric.get_latest()

# Create JSON response
response = {
    'status': 'ok',
    'grade': latest.overall_grade,
    'score': latest.overall_score,
    'metrics': {
        'code_quality': latest.code_quality_score,
        'coverage': latest.test_coverage,
        'complexity': latest.complexity_score,
        'security_issues': latest.security_issues,
        'file_violations': latest.file_violations,
    },
    'is_passing': latest.is_passing,
    'last_updated': latest.timestamp.isoformat(),
}
```

**Response**:
```json
{
  "status": "ok",
  "grade": "A",
  "score": 91.8,
  "metrics": {
    "code_quality": 90.5,
    "coverage": 87.5,
    "complexity": 5.9,
    "security_issues": 2,
    "file_violations": 0
  },
  "is_passing": true,
  "last_updated": "2025-11-05T14:32:15.123456+00:00"
}
```

---

## Summary of Sample Outputs

**Total Metrics Tracked**: 13
**Report Formats**: 2 (JSON + Markdown)
**Prometheus Metrics**: 11 gauges + 2 counters
**Grafana Panels**: 11 visualizations
**Database Retention**: 90 days (customizable)
**Update Frequency**: Real-time (Prometheus), Weekly (Reports)

All sample outputs demonstrate:
✅ Accurate metric aggregation
✅ Clear visualizations
✅ Actionable recommendations
✅ Trend analysis
✅ Production-ready formatting

---

**Last Updated**: November 5, 2025
**Samples Generated By**: Agent 37 Quality Metrics Dashboard
**System Status**: Production Ready
