[
  {
    "model": "help_center.helpcategory",
    "pk": 100,
    "fields": {
      "name": "Strategic Features (Nov 2025)",
      "slug": "strategic-features-nov-2025",
      "description": "New strategic features including Alert Suppression, Daily Activity Reports, and Outbound Webhooks",
      "icon": "star",
      "order": 5,
      "is_active": true
    }
  },
  
  {
    "model": "help_center.helparticle",
    "pk": 1001,
    "fields": {
      "category": 100,
      "title": "Alert Suppression & Noise Reduction",
      "slug": "alert-suppression-noise-reduction",
      "summary": "Reduce alert fatigue by 40-60% with intelligent alert suppression, flapping detection, and maintenance windows.",
      "content": "# Alert Suppression & Noise Reduction\n\n## Overview\n\nThe Alert Suppression system automatically reduces alert noise by detecting and suppressing:\n- **Flapping alerts**: Rapid state changes (3+ within 5 minutes)\n- **Duplicate alerts**: Same alert within 10-minute window\n- **Alert bursts**: 5+ similar alerts across a site\n- **Maintenance windows**: Planned maintenance periods\n\n## How It Works\n\n### Flapping Detection\nWhen a device rapidly changes state (e.g., OFFLINE → ONLINE → OFFLINE), the system detects this as \"flapping\" and suppresses subsequent alerts until the device stabilizes.\n\n**Example**: A camera with intermittent connectivity will trigger 1 alert instead of 10.\n\n### Deduplication\nIdentical alerts within a 10-minute window are suppressed. Only the first occurrence is recorded.\n\n### Burst Detection\nWhen 5+ similar alerts occur across a site within 10 minutes, subsequent alerts are suppressed as a \"burst event.\"\n\n**Example**: Power outage causing 20 cameras to go offline - only first 5 alerts created, rest suppressed.\n\n### Maintenance Windows\nDuring planned maintenance, alerts from affected devices/sites are automatically suppressed.\n\n## Setting Up Maintenance Windows\n\n### Via Admin Interface\n1. Navigate to **NOC → Maintenance Windows**\n2. Click **Add Maintenance Window**\n3. Select:\n   - Site (or specific device)\n   - Start time\n   - End time\n4. Click **Save**\n\nAlerts during this period will be suppressed with reason \"Device in maintenance window.\"\n\n### Via API\n```python\nfrom apps.noc.services.alert_rules_service import AlertRulesService\nfrom django.utils import timezone\nfrom datetime import timedelta\n\n# Set 2-hour maintenance window\nAlertRulesService.set_maintenance_window(\n    site_id=1,\n    start_time=timezone.now(),\n    end_time=timezone.now() + timedelta(hours=2),\n    device_id=\"CAM-001\"  # Optional - None for site-wide\n)\n```\n\n## Monitoring Suppression Effectiveness\n\n### Suppression Statistics\nView suppression metrics:\n- Total alerts evaluated\n- Suppressed by reason (flapping, duplicate, burst, maintenance)\n- Suppression rate percentage\n\n### Alerts on Thresholds\n- **Too high suppression (>60%)**: May indicate misconfiguration\n- **Too low suppression (<10%)**: Not effectively reducing noise\n\n## Best Practices\n\n1. **Review suppression stats weekly**: Ensure 20-40% suppression rate is ideal\n2. **Plan maintenance windows**: Always set before planned work\n3. **Investigate flapping**: Flapping often indicates real device issues\n4. **Monitor burst events**: May indicate systemic problems (power, network)\n\n## Troubleshooting\n\n### \"Important alerts being suppressed\"\n- Check if device is in maintenance window\n- Review flapping detection - may need to reset\n- Verify alert type is not in burst\n\n### \"Too many alerts still coming through\"\n- Suppression targets 40-60% reduction, not 100%\n- Critical alerts should never be suppressed\n- Review alert thresholds and types\n\n## Impact\n\n- **40-60% alert noise reduction**\n- **Improved operator focus** on real issues\n- **Reduced alert fatigue**\n- **Better incident response times**\n\n## Related Topics\n- [NOC Alert Management](link)\n- [Device Monitoring](link)\n- [Incident Response](link)",
      "difficulty_level": "INTERMEDIATE",
      "target_roles": ["NOC_OPERATOR", "SITE_MANAGER", "ADMIN"],
      "status": "PUBLISHED",
      "is_featured": true,
      "view_count": 0,
      "helpful_count": 0
    }
  },
  
  {
    "model": "help_center.helparticle",
    "pk": 1002,
    "fields": {
      "category": 100,
      "title": "Daily Activity Reports (DAR)",
      "slug": "daily-activity-reports",
      "summary": "Generate comprehensive shift reports with incidents, tours, SOS alerts, and attendance for compliance and audit trails.",
      "content": "# Daily Activity Reports (DAR)\n\n## Overview\n\nDaily Activity Reports provide comprehensive shift documentation required for:\n- **Security compliance** (PSARA, industry standards)\n- **Audit trails** for incidents and activities\n- **Client transparency** and accountability\n- **Supervisor handoff** between shifts\n\n## What's Included\n\nEach DAR contains:\n\n### 1. Shift Summary\n- Guards assigned vs. present\n- Total hours worked\n- Coverage percentage\n- Post assignments\n\n### 2. Incidents & Events\n- All incidents with timestamps\n- Severity levels\n- Reported by whom\n- Current status\n\n### 3. Tours Completed\n- Tour names and assignments\n- Start/end times and duration\n- Checkpoint completion rates\n- Missed checkpoints\n\n### 4. SOS Alerts\n- Triggered SOS incidents\n- Guard location\n- Response time\n- Resolution status\n\n### 5. Device Events\n- Devices offline/reconnected\n- Battery warnings\n- Signal issues\n\n### 6. Attendance Exceptions\n- Late arrivals (>15 minutes)\n- Early departures\n- No-shows\n- Reasons provided\n\n### 7. Supervisor Notes\n- Shift notes and observations\n- Special instructions\n- Handoff information\n\n## Generating a DAR\n\n### Manual Generation\n\n1. Navigate to **Reports → Daily Activity Report**\n2. Select:\n   - **Site**: Which location\n   - **Shift Date**: Date of shift\n   - **Shift Type**: DAY / EVENING / NIGHT\n3. (Optional) Add **Supervisor Notes**\n4. Click **Generate Report**\n5. PDF downloads automatically\n\n### Scheduled Generation\n\nSet up automatic DAR generation:\n\n1. Navigate to **Reports → Scheduled Reports**\n2. Click **Add Schedule**\n3. Configure:\n   - **Report Type**: Daily Activity Report\n   - **Site**: Select site(s)\n   - **Schedule**: Daily at shift end time\n   - **Recipients**: Email addresses\n4. Click **Save**\n\nReports will be emailed automatically after each shift.\n\n### Via API\n\n```python\nfrom apps.reports.services.dar_service import DARService\nfrom apps.reports.utils.pdf_generator import generate_pdf\nfrom datetime import date\n\n# Generate DAR data\nreport_data = DARService.generate_dar(\n    site_id=1,\n    shift_date=date.today(),\n    shift_type='DAY',\n    supervisor_notes='All checkpoints completed. No issues.'\n)\n\n# Generate PDF\npdf = generate_pdf('daily_activity_report.html', report_data)\n```\n\n## Shift Types & Boundaries\n\n### Standard Shift Times\n- **DAY Shift**: 06:00 - 14:00 (8 hours)\n- **EVENING Shift**: 14:00 - 22:00 (8 hours)\n- **NIGHT Shift**: 22:00 - 06:00 (8 hours, crosses midnight)\n\nShift times can be customized per site in site configuration.\n\n## PDF Features\n\n### Professional Layout\n- Client logo and branding\n- Site and shift information header\n- Color-coded severity levels\n- Progress bars for tour completion\n- Signature blocks (Supervisor, Manager, Client)\n\n### Print-Ready\n- A4 page size\n- Page break optimization\n- Clear section headers\n- Professional formatting\n\n## Use Cases\n\n### Compliance Audits\n- Required for PSARA licensing\n- Proof of patrol coverage\n- Incident documentation\n\n### Client Reporting\n- Transparency on shift activities\n- Incident accountability\n- Service quality demonstration\n\n### Shift Handoff\n- Incoming supervisor review\n- Continuity of operations\n- Pending item tracking\n\n### Legal Protection\n- Timestamped incident records\n- Witness documentation\n- Chain of custody for evidence\n\n## Best Practices\n\n1. **Generate within 1 hour of shift end** while details are fresh\n2. **Review before finalizing** for accuracy\n3. **Add supervisor notes** for context and observations\n4. **Obtain signatures** for official records\n5. **Store securely** for minimum 7 years (compliance requirement)\n6. **Email to client** within 24 hours of shift\n\n## Troubleshooting\n\n### \"No data showing in report\"\n- Verify shift date and type are correct\n- Check if site ID is valid\n- Ensure data exists for that time period\n\n### \"Tours not appearing\"\n- Tours must have completed_date within shift boundaries\n- Check tour status (only COMPLETED tours included)\n\n### \"PDF generation fails\"\n- Check WeasyPrint installation\n- Verify template path is correct\n- Review logs for specific error\n\n## Pricing\n\nDAR feature is available in:\n- **Professional Plan**: Manual generation\n- **Enterprise Plan**: Scheduled generation + API access\n- **Premium Add-on**: $50-100/month per site\n\n## Related Topics\n- [Shift Management](link)\n- [Tour Scheduling](link)\n- [Incident Reporting](link)\n- [Compliance Requirements](link)",
      "difficulty_level": "BEGINNER",
      "target_roles": ["SUPERVISOR", "SITE_MANAGER", "ADMIN"],
      "status": "PUBLISHED",
      "is_featured": true,
      "view_count": 0,
      "helpful_count": 0
    }
  },
  
  {
    "model": "help_center.helparticle",
    "pk": 1003,
    "fields": {
      "category": 100,
      "title": "Outbound Webhooks & Integrations",
      "slug": "outbound-webhooks-integrations",
      "summary": "Integrate YOUTILITY5 with external systems via webhooks. Send real-time events to Teams, Slack, or custom endpoints.",
      "content": "# Outbound Webhooks & Integrations\n\n## Overview\n\nWebhooks enable YOUTILITY5 to send real-time events to external systems:\n- **Microsoft Teams** channels\n- **Slack** workspaces\n- **Custom applications** and automation platforms\n- **Third-party services** (PagerDuty, Zapier, etc.)\n\n## Supported Events\n\n### Helpdesk Events\n- `ticket.created` - New ticket created\n- `ticket.assigned` - Ticket assigned to user\n- `ticket.resolved` - Ticket marked resolved\n- `ticket.escalated` - Ticket escalated\n\n### NOC & Alert Events\n- `alert.created` - New alert triggered\n- `alert.escalated` - Alert escalated to supervisor\n- `alert.resolved` - Alert marked resolved\n- `device.low_health` - Device health score <70\n\n### Critical Events\n- `sos.triggered` - Guard SOS button pressed\n- `sla.at_risk` - Ticket approaching SLA breach\n- `device.offline` - Critical device offline\n\n### Operational Events\n- `attendance.exception` - Late/early/no-show\n- `tour.missed` - Tour checkpoint missed\n- `shift.started` - Shift begin\n- `shift.ended` - Shift complete\n\n## Configuration\n\n### Setting Up Generic Webhooks\n\n1. Navigate to **Settings → Integrations → Webhooks**\n2. Click **Add Webhook**\n3. Configure:\n   - **Name**: Descriptive name (e.g., \"Primary Automation\")\n   - **URL**: Your endpoint URL (https required)\n   - **Secret**: Shared secret for HMAC signature\n   - **Events**: Select event types to send\n   - **Enabled**: Toggle on/off\n   - **Retry Count**: Max retries (default: 3)\n4. Click **Test Webhook** to verify\n5. Click **Save**\n\n### Configuration via API\n\nWebhook configurations are stored in TypeAssist:\n\n```python\nfrom apps.onboarding.models import TypeAssist\n\n# Get or create webhook config\nconfig, created = TypeAssist.objects.get_or_create(\n    client_id=tenant_id,\n    type='webhook_config'\n)\n\n# Add webhook\nwebhooks = config.other_data.get('webhooks', [])\nwebhooks.append({\n    \"id\": \"webhook-001\",\n    \"name\": \"Primary Webhook\",\n    \"url\": \"https://api.example.com/webhook\",\n    \"events\": [\"ticket.created\", \"alert.escalated\"],\n    \"secret\": \"your-secret-key\",\n    \"enabled\": True,\n    \"retry_count\": 3,\n    \"timeout_seconds\": 30\n})\n\nconfig.other_data = {'webhooks': webhooks}\nconfig.save()\n```\n\n## Microsoft Teams Integration\n\n### Setup\n\n1. In Teams, navigate to channel → **Connectors**\n2. Add **Incoming Webhook**\n3. Copy webhook URL\n4. In YOUTILITY5:\n   - **Settings → Integrations → Teams**\n   - Paste webhook URL\n   - Select events to send\n   - Click **Test** to verify\n   - Click **Save**\n\n### Event Cards\n\nTeams notifications appear as **Adaptive Cards** with:\n- Color-coded severity (red for critical, orange for warning)\n- Event details in structured format\n- **Action button** linking to YOUTILITY5\n- Timestamp and correlation ID\n\n### Example Teams Configuration\n\n```python\nconfig.other_data['teams'] = {\n    \"enabled\": True,\n    \"webhook_url\": \"https://outlook.office.com/webhook/...\",\n    \"events\": [\"sos.triggered\", \"sla.at_risk\", \"alert.escalated\"]\n}\nconfig.save()\n```\n\n## Slack Integration\n\n### Setup\n\n1. In Slack workspace, create **Incoming Webhook**\n2. Select channel (e.g., #operations)\n3. Copy webhook URL\n4. In YOUTILITY5:\n   - **Settings → Integrations → Slack**\n   - Paste webhook URL\n   - Select channel name\n   - Select events\n   - Click **Save**\n\n### Message Format\n\nSlack notifications include:\n- Username: \"YOUTILITY5 Bot\"\n- Icon: Configurable\n- Formatted message with markdown\n- Attachments for details\n- Link to event in YOUTILITY5\n\n## Event Payload Structure\n\nAll webhooks receive standardized JSON:\n\n```json\n{\n  \"event_id\": \"evt_abc123\",\n  \"event_type\": \"ticket.created\",\n  \"correlation_id\": \"corr_xyz789\",\n  \"timestamp\": \"2025-11-06T10:30:00Z\",\n  \"tenant_id\": 1,\n  \"api_version\": \"v2\",\n  \"payload\": {\n    \"ticket_id\": 123,\n    \"title\": \"Broken lock on Gate 3\",\n    \"priority\": \"HIGH\",\n    \"created_by\": \"john.doe\",\n    \"site\": \"Main Campus\",\n    \"url\": \"https://app.youtility5.com/tickets/123\"\n  }\n}\n```\n\n## Signature Verification\n\nAll webhooks include **X-Webhook-Signature** header with HMAC-SHA256 signature.\n\n### Verifying Signatures\n\n```python\nimport hmac\nimport hashlib\nimport json\n\ndef verify_webhook(payload, signature, secret):\n    \"\"\"Verify webhook signature.\"\"\"\n    payload_bytes = json.dumps(payload, sort_keys=True).encode('utf-8')\n    expected_signature = hmac.new(\n        secret.encode('utf-8'),\n        payload_bytes,\n        hashlib.sha256\n    ).hexdigest()\n    \n    return hmac.compare_digest(signature, expected_signature)\n```\n\n## Reliability Features\n\n### Retry Logic\n- **Attempt 1**: Immediate delivery\n- **Attempt 2**: 1 minute delay\n- **Attempt 3**: 5 minutes delay\n- **Attempt 4**: 15 minutes delay\n- **Failed**: Moved to dead-letter queue\n\n### Dead-Letter Queue\nFailed webhooks after max retries are stored for 7 days:\n- View in **Integrations → Failed Webhooks**\n- Manually retry\n- Debug delivery issues\n\n### Rate Limiting\n- **100 webhooks per minute** per tenant\n- Prevents overwhelming external systems\n- Excess webhooks queued for next minute\n\n### Timeouts\n- **Connect timeout**: 5 seconds\n- **Read timeout**: 30 seconds (configurable)\n- **Total timeout**: 35 seconds max\n\n## Monitoring\n\n### Webhook Metrics\nView in **Integrations → Metrics**:\n- Total webhooks sent (24h/7d/30d)\n- Success rate\n- Failure rate by reason\n- Average response time\n- Event type breakdown\n\n### Alerts\nAutomatic alerts for:\n- **>10% failure rate**: Check endpoint availability\n- **Rate limit exceeded**: Review event volume\n- **Dead-letter queue >50**: Review failures\n\n## Use Cases\n\n### Automation Workflows\n- Auto-create tickets in ITSM systems\n- Trigger incident response procedures\n- Update external dashboards\n\n### Notifications\n- Critical alerts to on-call teams via PagerDuty\n- SOS alerts to security dispatch\n- SLA risks to management\n\n### Analytics\n- Send events to data warehouse\n- Real-time metrics in BI tools\n- Compliance logging\n\n## Security Best Practices\n\n1. **Always use HTTPS** for webhook URLs\n2. **Verify signatures** on receiving end\n3. **Rotate secrets** quarterly\n4. **Whitelist IPs** if possible (contact support for IP ranges)\n5. **Monitor for anomalies** in webhook traffic\n\n## Troubleshooting\n\n### \"Webhooks not being delivered\"\n- Check endpoint is accessible from internet\n- Verify HTTPS with valid certificate\n- Review firewall/security group rules\n- Check webhook is enabled\n- Verify events are subscribed\n\n### \"Signature verification fails\"\n- Ensure secret matches on both ends\n- Verify JSON is sorted by keys before hashing\n- Check for encoding issues (UTF-8)\n\n### \"Too many webhooks in dead-letter queue\"\n- Check endpoint health and response times\n- Verify endpoint returns 2xx status codes\n- Review timeout settings\n- Check for rate limiting on receiving end\n\n## Pricing\n\nWebhook feature available in:\n- **Professional Plan**: Up to 1,000 webhooks/month\n- **Enterprise Plan**: Up to 10,000 webhooks/month\n- **Premium Add-on**: Unlimited webhooks - $100-200/month per client\n\n## Related Topics\n- [API Documentation](link)\n- [Integration Architecture](link)\n- [Security Best Practices](link)\n- [Event Types Reference](link)",
      "difficulty_level": "ADVANCED",
      "target_roles": ["ADMIN", "DEVELOPER", "INTEGRATIONS_MANAGER"],
      "status": "PUBLISHED",
      "is_featured": true,
      "view_count": 0,
      "helpful_count": 0
    }
  }
]
