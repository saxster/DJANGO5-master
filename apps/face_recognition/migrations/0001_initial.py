# Generated by Django 5.2.1 on 2025-09-04 06:23

import apps.peoples.models
import django.contrib.postgres.fields
import django.core.serializers.json
import django.utils.timezone
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='AntiSpoofingModel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('cdtz', models.DateTimeField(default=django.utils.timezone.now, verbose_name='cdtz')),
                ('mdtz', models.DateTimeField(default=django.utils.timezone.now, verbose_name='mdtz')),
                ('ctzoffset', models.IntegerField(default=-1, verbose_name='TimeZone')),
                ('name', models.CharField(max_length=100, unique=True)),
                ('model_type', models.CharField(choices=[('TEXTURE_BASED', 'Texture-based'), ('MOTION_BASED', 'Motion-based'), ('DEPTH_BASED', 'Depth-based'), ('CHALLENGE_RESPONSE', 'Challenge-Response'), ('MULTI_MODAL', 'Multi-modal')], max_length=20)),
                ('version', models.CharField(default='1.0', max_length=20)),
                ('liveness_threshold', models.FloatField(default=0.5, help_text='Threshold for liveness classification')),
                ('true_positive_rate', models.FloatField(blank=True, null=True)),
                ('false_positive_rate', models.FloatField(blank=True, null=True)),
                ('accuracy', models.FloatField(blank=True, null=True)),
                ('model_file_path', models.CharField(blank=True, max_length=500, null=True)),
                ('requires_motion', models.BooleanField(default=False, help_text='Whether model requires motion detection')),
                ('requires_user_interaction', models.BooleanField(default=False, help_text='Whether model requires user interaction')),
                ('detection_count', models.BigIntegerField(default=0)),
                ('spoof_detections', models.BigIntegerField(default=0)),
                ('last_used', models.DateTimeField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
            ],
            options={
                'verbose_name': 'Anti-Spoofing Model',
                'verbose_name_plural': 'Anti-Spoofing Models',
                'db_table': 'anti_spoofing_model',
                'ordering': ['mdtz'],
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='FaceEmbedding',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('cdtz', models.DateTimeField(default=django.utils.timezone.now, verbose_name='cdtz')),
                ('mdtz', models.DateTimeField(default=django.utils.timezone.now, verbose_name='mdtz')),
                ('ctzoffset', models.IntegerField(default=-1, verbose_name='TimeZone')),
                ('embedding_vector', django.contrib.postgres.fields.ArrayField(base_field=models.FloatField(), help_text='Face embedding vector', size=512)),
                ('source_image_path', models.CharField(blank=True, max_length=500, null=True)),
                ('source_image_hash', models.CharField(blank=True, max_length=64, null=True)),
                ('face_confidence', models.FloatField(help_text='Confidence of face detection (0-1)')),
                ('image_quality_score', models.FloatField(blank=True, help_text='Quality score of source image (0-1)', null=True)),
                ('extraction_timestamp', models.DateTimeField(auto_now_add=True)),
                ('face_landmarks', models.JSONField(blank=True, encoder=django.core.serializers.json.DjangoJSONEncoder, help_text='Detected face landmarks', null=True)),
                ('is_primary', models.BooleanField(default=False, help_text='Whether this is the primary embedding for the user')),
                ('is_validated', models.BooleanField(default=False, help_text='Whether this embedding has been validated')),
                ('validation_score', models.FloatField(blank=True, null=True)),
                ('verification_count', models.IntegerField(default=0)),
                ('successful_matches', models.IntegerField(default=0)),
                ('last_used', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Face Embedding',
                'verbose_name_plural': 'Face Embeddings',
                'db_table': 'face_embedding',
                'ordering': ['mdtz'],
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='FaceQualityMetrics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('cdtz', models.DateTimeField(default=django.utils.timezone.now, verbose_name='cdtz')),
                ('mdtz', models.DateTimeField(default=django.utils.timezone.now, verbose_name='mdtz')),
                ('ctzoffset', models.IntegerField(default=-1, verbose_name='TimeZone')),
                ('image_path', models.CharField(max_length=500, unique=True)),
                ('image_hash', models.CharField(max_length=64, unique=True)),
                ('overall_quality', models.FloatField(help_text='Overall image quality score')),
                ('sharpness_score', models.FloatField(help_text='Image sharpness score')),
                ('brightness_score', models.FloatField(help_text='Brightness adequacy score')),
                ('contrast_score', models.FloatField(help_text='Contrast adequacy score')),
                ('face_size_score', models.FloatField(help_text='Face size adequacy score')),
                ('face_pose_score', models.FloatField(help_text='Face pose quality score')),
                ('eye_visibility_score', models.FloatField(help_text='Eye visibility score')),
                ('resolution_width', models.IntegerField()),
                ('resolution_height', models.IntegerField()),
                ('file_size_bytes', models.BigIntegerField()),
                ('face_detection_confidence', models.FloatField()),
                ('landmark_quality', models.JSONField(encoder=django.core.serializers.json.DjangoJSONEncoder, help_text='Quality of detected landmarks')),
                ('analysis_timestamp', models.DateTimeField(auto_now_add=True)),
                ('analysis_model_version', models.CharField(default='1.0', max_length=50)),
                ('quality_issues', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=100), blank=True, default=list, help_text='Identified quality issues', size=None)),
                ('improvement_suggestions', models.JSONField(default=list, encoder=django.core.serializers.json.DjangoJSONEncoder, help_text='Suggestions for improvement')),
            ],
            options={
                'verbose_name': 'Face Quality Metrics',
                'verbose_name_plural': 'Face Quality Metrics',
                'db_table': 'face_quality_metrics',
            },
        ),
        migrations.CreateModel(
            name='FaceRecognitionConfig',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('cdtz', models.DateTimeField(default=django.utils.timezone.now, verbose_name='cdtz')),
                ('mdtz', models.DateTimeField(default=django.utils.timezone.now, verbose_name='mdtz')),
                ('ctzoffset', models.IntegerField(default=-1, verbose_name='TimeZone')),
                ('name', models.CharField(max_length=100, unique=True)),
                ('config_type', models.CharField(choices=[('SYSTEM', 'System Configuration'), ('SECURITY', 'Security Settings'), ('PERFORMANCE', 'Performance Settings'), ('INTEGRATION', 'Integration Settings')], max_length=20)),
                ('description', models.TextField()),
                ('config_data', models.JSONField(encoder=django.core.serializers.json.DjangoJSONEncoder, help_text='Configuration parameters')),
                ('applies_to_locations', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=100), blank=True, default=list, help_text='Location codes this configuration applies to', size=None)),
                ('is_active', models.BooleanField(default=True)),
                ('priority', models.IntegerField(default=100, help_text='Configuration priority (lower = higher priority)')),
                ('last_validated', models.DateTimeField(blank=True, null=True)),
                ('validation_errors', models.JSONField(default=list, encoder=django.core.serializers.json.DjangoJSONEncoder, help_text='Configuration validation errors')),
                ('applied_count', models.IntegerField(default=0)),
                ('last_applied', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Face Recognition Configuration',
                'verbose_name_plural': 'Face Recognition Configurations',
                'db_table': 'face_recognition_config',
                'ordering': ['priority', 'name'],
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='FaceRecognitionModel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('cdtz', models.DateTimeField(default=django.utils.timezone.now, verbose_name='cdtz')),
                ('mdtz', models.DateTimeField(default=django.utils.timezone.now, verbose_name='mdtz')),
                ('ctzoffset', models.IntegerField(default=-1, verbose_name='TimeZone')),
                ('name', models.CharField(max_length=100, unique=True)),
                ('model_type', models.CharField(choices=[('FACENET512', 'FaceNet512'), ('ARCFACE', 'ArcFace'), ('INSIGHTFACE', 'InsightFace'), ('ENSEMBLE', 'Ensemble Model'), ('CUSTOM', 'Custom Model')], max_length=20)),
                ('version', models.CharField(default='1.0', max_length=20)),
                ('status', models.CharField(choices=[('ACTIVE', 'Active'), ('INACTIVE', 'Inactive'), ('TRAINING', 'Training'), ('DEPRECATED', 'Deprecated')], default='ACTIVE', max_length=20)),
                ('similarity_threshold', models.FloatField(default=0.3, help_text='Cosine distance threshold for face matching')),
                ('confidence_threshold', models.FloatField(default=0.7, help_text='Minimum confidence for face detection')),
                ('liveness_detection_enabled', models.BooleanField(default=True)),
                ('liveness_threshold', models.FloatField(default=0.5, help_text='Threshold for liveness detection')),
                ('accuracy', models.FloatField(blank=True, help_text='Model accuracy (0-1)', null=True)),
                ('false_acceptance_rate', models.FloatField(blank=True, null=True)),
                ('false_rejection_rate', models.FloatField(blank=True, null=True)),
                ('processing_time_ms', models.FloatField(blank=True, null=True)),
                ('model_file_path', models.CharField(blank=True, max_length=500, null=True)),
                ('weights_file_path', models.CharField(blank=True, max_length=500, null=True)),
                ('verification_count', models.BigIntegerField(default=0)),
                ('successful_verifications', models.BigIntegerField(default=0)),
                ('last_used', models.DateTimeField(blank=True, null=True)),
                ('training_dataset_info', models.JSONField(default=dict, encoder=django.core.serializers.json.DjangoJSONEncoder, help_text='Information about training dataset')),
                ('hyperparameters', models.JSONField(default=dict, encoder=django.core.serializers.json.DjangoJSONEncoder, help_text='Model hyperparameters')),
            ],
            options={
                'verbose_name': 'Face Recognition Model',
                'verbose_name_plural': 'Face Recognition Models',
                'db_table': 'face_recognition_model',
                'ordering': ['mdtz'],
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='FaceVerificationLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('cdtz', models.DateTimeField(default=django.utils.timezone.now, verbose_name='cdtz')),
                ('mdtz', models.DateTimeField(default=django.utils.timezone.now, verbose_name='mdtz')),
                ('ctzoffset', models.IntegerField(default=-1, verbose_name='TimeZone')),
                ('verification_timestamp', models.DateTimeField(auto_now_add=True)),
                ('result', models.CharField(choices=[('SUCCESS', 'Verification Successful'), ('FAILED', 'Verification Failed'), ('ERROR', 'Verification Error'), ('REJECTED', 'Rejected by Anti-spoofing'), ('NO_FACE', 'No Face Detected'), ('MULTIPLE_FACES', 'Multiple Faces Detected')], max_length=20)),
                ('similarity_score', models.FloatField(blank=True, help_text='Similarity score (1 - cosine distance)', null=True)),
                ('confidence_score', models.FloatField(blank=True, help_text='Overall confidence in verification', null=True)),
                ('liveness_score', models.FloatField(blank=True, help_text='Liveness detection score', null=True)),
                ('spoof_detected', models.BooleanField(default=False)),
                ('input_image_path', models.CharField(blank=True, max_length=500, null=True)),
                ('input_image_hash', models.CharField(blank=True, max_length=64, null=True)),
                ('face_detection_confidence', models.FloatField(blank=True, null=True)),
                ('processing_time_ms', models.FloatField(blank=True, null=True)),
                ('model_load_time_ms', models.FloatField(blank=True, null=True)),
                ('error_message', models.TextField(blank=True, null=True)),
                ('error_code', models.CharField(blank=True, max_length=50, null=True)),
                ('verification_metadata', models.JSONField(default=dict, encoder=django.core.serializers.json.DjangoJSONEncoder, help_text='Detailed verification metadata')),
                ('fraud_indicators', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=50), blank=True, default=list, help_text='Detected fraud indicators', size=None)),
                ('fraud_risk_score', models.FloatField(default=0.0, help_text='Calculated fraud risk score (0-1)')),
            ],
            options={
                'verbose_name': 'Face Verification Log',
                'verbose_name_plural': 'Face Verification Logs',
                'db_table': 'face_verification_log',
                'ordering': ['mdtz'],
                'abstract': False,
            },
        ),
    ]
