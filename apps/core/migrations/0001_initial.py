# Generated by Django 5.2.7 on 2025-11-09 10:20

import apps.core.fields.encrypted_fields
import apps.core.utils_new.cron_utilities
import apps.peoples.models.base_model
import django.contrib.gis.db.models.fields
import django.contrib.postgres.fields
import django.contrib.postgres.search
import django.core.serializers.json
import django.core.validators
import django.db.models.deletion
import django.utils.timezone
import uuid
from decimal import Decimal
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ("tenants", "0001_initial"),
    ]

    operations = [
        migrations.CreateModel(
            name="OperationsQueueItem",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "item_type",
                    models.CharField(
                        choices=[
                            ("TICKET", "Help Desk Ticket"),
                            ("INCIDENT", "Security Incident"),
                            ("WORK_ORDER", "Work Order"),
                            ("ALERT", "System Alert"),
                            ("EXCEPTION", "Exception/Error"),
                        ],
                        max_length=20,
                        verbose_name="Item Type",
                    ),
                ),
                (
                    "item_id",
                    models.PositiveIntegerField(
                        help_text="ID of the underlying record", verbose_name="Item ID"
                    ),
                ),
                ("title", models.CharField(max_length=500, verbose_name="Title")),
                (
                    "description",
                    models.TextField(blank=True, verbose_name="Description"),
                ),
                (
                    "priority_score",
                    models.IntegerField(
                        help_text="Calculated priority (0-100, higher = more urgent)",
                        verbose_name="Priority Score",
                    ),
                ),
                (
                    "breach_risk",
                    models.CharField(
                        choices=[
                            ("LOW", "Low Risk"),
                            ("MEDIUM", "Medium Risk"),
                            ("HIGH", "High Risk"),
                            ("CRITICAL", "Critical - Imminent Breach"),
                        ],
                        help_text="Risk of missing deadline",
                        max_length=20,
                        verbose_name="SLA Breach Risk",
                    ),
                ),
                (
                    "sla_due_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="When this item's SLA expires",
                        null=True,
                        verbose_name="SLA Due At",
                    ),
                ),
                ("status", models.CharField(max_length=50, verbose_name="Status")),
                ("created_at", models.DateTimeField(verbose_name="Created At")),
                ("updated_at", models.DateTimeField(verbose_name="Updated At")),
            ],
            options={
                "verbose_name": "Operations Queue Item",
                "verbose_name_plural": "Operations Queue",
                "db_table": "v_operations_queue",
                "ordering": ["-priority_score", "sla_due_at"],
                "managed": False,
            },
        ),
        migrations.CreateModel(
            name="AdminMentorSession",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True,
                        help_text="When this record was created",
                        verbose_name="Created at",
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(
                        auto_now=True,
                        help_text="When this record was last modified",
                        verbose_name="Updated at",
                    ),
                ),
                (
                    "session_start",
                    models.DateTimeField(
                        auto_now_add=True, help_text="When session started"
                    ),
                ),
                (
                    "session_end",
                    models.DateTimeField(
                        blank=True, help_text="When session ended", null=True
                    ),
                ),
                (
                    "page_context",
                    models.CharField(
                        help_text="Current admin page URL", max_length=500
                    ),
                ),
                (
                    "features_used",
                    models.JSONField(
                        default=list, help_text="List of features admin has used"
                    ),
                ),
                (
                    "features_shown",
                    models.JSONField(
                        default=list, help_text="List of features shown to admin"
                    ),
                ),
                (
                    "skill_level",
                    models.CharField(
                        choices=[
                            ("NOVICE", "New to admin panel"),
                            ("INTERMEDIATE", "Knows basics"),
                            ("ADVANCED", "Power user"),
                            ("EXPERT", "Knows everything"),
                        ],
                        default="INTERMEDIATE",
                        help_text="Estimated skill level",
                        max_length=20,
                    ),
                ),
                (
                    "questions_asked",
                    models.JSONField(
                        default=list, help_text="Questions admin asked the mentor"
                    ),
                ),
                (
                    "suggestions_shown",
                    models.JSONField(
                        default=list, help_text="Suggestions displayed to admin"
                    ),
                ),
                (
                    "suggestions_followed",
                    models.JSONField(
                        default=list, help_text="Suggestions admin acted upon"
                    ),
                ),
                (
                    "time_saved_estimate",
                    models.IntegerField(
                        default=0, help_text="Estimated time saved in seconds"
                    ),
                ),
                (
                    "tasks_completed",
                    models.IntegerField(
                        default=0, help_text="Number of tasks completed"
                    ),
                ),
                (
                    "shortcuts_used",
                    models.IntegerField(
                        default=0, help_text="Number of keyboard shortcuts used"
                    ),
                ),
            ],
            options={
                "verbose_name": "Admin Mentor Session",
                "verbose_name_plural": "Admin Mentor Sessions",
                "ordering": ["-session_start"],
            },
        ),
        migrations.CreateModel(
            name="AdminMentorTip",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True,
                        help_text="When this record was created",
                        verbose_name="Created at",
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(
                        auto_now=True,
                        help_text="When this record was last modified",
                        verbose_name="Updated at",
                    ),
                ),
                (
                    "trigger_context",
                    models.CharField(
                        help_text="When to show this tip (e.g., 'viewing_ticket_list')",
                        max_length=100,
                    ),
                ),
                (
                    "condition",
                    models.JSONField(
                        default=dict,
                        help_text="Conditions to show tip: {'tickets_open': '> 10'}",
                    ),
                ),
                (
                    "tip_title",
                    models.CharField(
                        help_text="Catchy title for the tip", max_length=200
                    ),
                ),
                (
                    "tip_content",
                    models.TextField(help_text="The actual tip in friendly language"),
                ),
                (
                    "tip_type",
                    models.CharField(
                        choices=[
                            ("SHORTCUT", "Keyboard shortcut"),
                            ("FEATURE", "Feature suggestion"),
                            ("BEST_PRACTICE", "Best practice"),
                            ("TIME_SAVER", "Time-saving tip"),
                            ("WARNING", "Important warning"),
                        ],
                        default="FEATURE",
                        max_length=20,
                    ),
                ),
                (
                    "action_button_text",
                    models.CharField(
                        blank=True,
                        help_text="Call to action: 'Try it now', 'Learn more'",
                        max_length=100,
                    ),
                ),
                (
                    "action_url",
                    models.CharField(
                        blank=True,
                        help_text="URL to navigate when action clicked",
                        max_length=500,
                    ),
                ),
                (
                    "priority",
                    models.IntegerField(
                        default=5, help_text="Priority 1-10, higher shows first"
                    ),
                ),
                (
                    "show_frequency",
                    models.CharField(
                        choices=[
                            ("ONCE", "Show only once"),
                            ("DAILY", "Once per day"),
                            ("WEEKLY", "Once per week"),
                            ("ALWAYS", "Every time condition met"),
                        ],
                        default="ONCE",
                        max_length=20,
                    ),
                ),
                (
                    "active",
                    models.BooleanField(
                        default=True, help_text="Whether this tip is currently active"
                    ),
                ),
            ],
            options={
                "verbose_name": "Admin Mentor Tip",
                "verbose_name_plural": "Admin Mentor Tips",
                "ordering": ["-priority", "tip_title"],
            },
        ),
        migrations.CreateModel(
            name="AgentRecommendation",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "agent_id",
                    models.CharField(
                        db_index=True,
                        help_text="Agent identifier (e.g., 'taskbot-001')",
                        max_length=50,
                    ),
                ),
                (
                    "agent_name",
                    models.CharField(
                        help_text="Human-readable agent name (e.g., 'TaskBot')",
                        max_length=100,
                    ),
                ),
                (
                    "module",
                    models.CharField(
                        choices=[
                            ("tasks", "Tasks"),
                            ("tours", "Tours"),
                            ("alerts", "Alerts"),
                            ("assets", "Assets"),
                            ("attendance", "Attendance"),
                            ("routes", "Routes"),
                        ],
                        db_index=True,
                        help_text="Dashboard module this recommendation targets",
                        max_length=50,
                    ),
                ),
                (
                    "time_range_start",
                    models.DateTimeField(help_text="Analysis period start"),
                ),
                (
                    "time_range_end",
                    models.DateTimeField(help_text="Analysis period end"),
                ),
                (
                    "context_metrics",
                    models.JSONField(
                        default=dict,
                        help_text="Module-specific metrics (flexible JSON structure)",
                    ),
                ),
                (
                    "summary",
                    models.TextField(
                        help_text="Human-readable summary of recommendation"
                    ),
                ),
                (
                    "details",
                    models.JSONField(
                        default=list,
                        help_text="Array of entity-specific details (tasks, tours, etc.)",
                    ),
                ),
                (
                    "confidence",
                    models.FloatField(
                        help_text="Confidence score (0.0-1.0)",
                        validators=[
                            django.core.validators.MinValueValidator(0.0),
                            django.core.validators.MaxValueValidator(1.0),
                        ],
                    ),
                ),
                (
                    "severity",
                    models.CharField(
                        choices=[
                            ("low", "Low"),
                            ("medium", "Medium"),
                            ("high", "High"),
                            ("critical", "Critical"),
                        ],
                        db_index=True,
                        default="medium",
                        help_text="Severity/priority level",
                        max_length=10,
                    ),
                ),
                (
                    "actions",
                    models.JSONField(
                        default=list,
                        help_text="Array of actionable buttons: [{label, type, endpoint, payload, url}]",
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending_review", "Pending Review"),
                            ("accepted", "Accepted"),
                            ("rejected", "Rejected"),
                            ("auto_executed", "Auto Executed"),
                        ],
                        db_index=True,
                        default="pending_review",
                        help_text="Recommendation lifecycle status",
                        max_length=20,
                    ),
                ),
                (
                    "human_feedback",
                    models.TextField(
                        blank=True, help_text="User feedback or notes", null=True
                    ),
                ),
                (
                    "dependencies",
                    models.JSONField(
                        default=list, help_text="Array of dependent recommendation IDs"
                    ),
                ),
                (
                    "auto_executed",
                    models.BooleanField(
                        default=False,
                        help_text="Whether action was auto-executed by agent",
                    ),
                ),
                (
                    "llm_provider",
                    models.CharField(
                        default="gemini",
                        help_text="LLM provider used (gemini, anthropic, openai)",
                        max_length=20,
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "expires_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="Recommendation expiration time",
                        null=True,
                    ),
                ),
            ],
            options={
                "verbose_name": "Agent Recommendation",
                "verbose_name_plural": "Agent Recommendations",
                "db_table": "core_agent_recommendation",
                "ordering": ["-created_at", "-severity", "-confidence"],
            },
        ),
        migrations.CreateModel(
            name="AlertThreshold",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "metric_type",
                    models.CharField(
                        choices=[
                            ("disk_usage", "Disk Usage %"),
                            ("memory_usage", "Memory Usage %"),
                            ("cpu_load", "CPU Load"),
                            ("response_time", "Response Time (ms)"),
                            ("error_rate", "Error Rate %"),
                            ("queue_depth", "Queue Depth"),
                        ],
                        db_index=True,
                        max_length=50,
                    ),
                ),
                (
                    "alert_level",
                    models.CharField(
                        choices=[("warning", "Warning"), ("critical", "Critical")],
                        max_length=20,
                    ),
                ),
                ("threshold_value", models.FloatField()),
                ("enabled", models.BooleanField(default=True)),
                ("description", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "verbose_name": "Alert Threshold",
                "verbose_name_plural": "Alert Thresholds",
                "db_table": "core_alert_threshold",
                "ordering": ["metric_type", "alert_level"],
            },
        ),
        migrations.CreateModel(
            name="APIAccessLog",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "ip_address",
                    models.GenericIPAddressField(help_text="IP address of the request"),
                ),
                (
                    "method",
                    models.CharField(help_text="HTTP method used", max_length=10),
                ),
                ("path", models.CharField(help_text="Request path", max_length=500)),
                (
                    "query_params",
                    models.TextField(blank=True, help_text="Query parameters"),
                ),
                (
                    "user_agent",
                    models.TextField(blank=True, help_text="User agent string"),
                ),
                (
                    "response_status",
                    models.IntegerField(
                        help_text="HTTP response status code", null=True
                    ),
                ),
                (
                    "response_time",
                    models.IntegerField(help_text="Response time in milliseconds"),
                ),
                (
                    "error_message",
                    models.TextField(
                        blank=True, help_text="Error message if request failed"
                    ),
                ),
                (
                    "timestamp",
                    models.DateTimeField(
                        default=django.utils.timezone.now,
                        help_text="When the request was made",
                    ),
                ),
            ],
            options={
                "db_table": "api_access_logs",
                "ordering": ["-timestamp"],
            },
        ),
        migrations.CreateModel(
            name="APIDeprecation",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True,
                        help_text="When this record was created",
                        verbose_name="Created at",
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(
                        auto_now=True,
                        help_text="When this record was last modified",
                        verbose_name="Updated at",
                    ),
                ),
                (
                    "ctzoffset",
                    models.IntegerField(
                        default=-1,
                        help_text="User's timezone offset in minutes",
                        verbose_name="Timezone offset",
                    ),
                ),
                (
                    "endpoint_pattern",
                    models.CharField(
                        help_text="URL pattern or API field path", max_length=255
                    ),
                ),
                (
                    "api_type",
                    models.CharField(
                        choices=[("rest", "REST API")], default="rest", max_length=20
                    ),
                ),
                (
                    "version_deprecated",
                    models.CharField(
                        help_text="Version when deprecated", max_length=10
                    ),
                ),
                (
                    "version_removed",
                    models.CharField(
                        blank=True,
                        help_text="Version when removed",
                        max_length=10,
                        null=True,
                    ),
                ),
                (
                    "deprecated_date",
                    models.DateTimeField(default=django.utils.timezone.now),
                ),
                (
                    "sunset_date",
                    models.DateTimeField(
                        blank=True, help_text="RFC 8594 sunset date", null=True
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("active", "Active - No deprecation"),
                            ("deprecated", "Deprecated - Still functional"),
                            ("sunset_warning", "Sunset Warning - Removal imminent"),
                            ("removed", "Removed - No longer available"),
                        ],
                        default="active",
                        max_length=20,
                    ),
                ),
                (
                    "replacement_endpoint",
                    models.CharField(blank=True, max_length=255, null=True),
                ),
                (
                    "migration_url",
                    models.URLField(blank=True, max_length=500, null=True),
                ),
                ("deprecation_reason", models.TextField()),
                ("notify_on_usage", models.BooleanField(default=True)),
            ],
            options={
                "verbose_name": "API Deprecation",
                "verbose_name_plural": "API Deprecations",
                "db_table": "api_deprecation",
            },
        ),
        migrations.CreateModel(
            name="APIDeprecationUsage",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True,
                        help_text="When this record was created",
                        verbose_name="Created at",
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(
                        auto_now=True,
                        help_text="When this record was last modified",
                        verbose_name="Updated at",
                    ),
                ),
                (
                    "ctzoffset",
                    models.IntegerField(
                        default=-1,
                        help_text="User's timezone offset in minutes",
                        verbose_name="Timezone offset",
                    ),
                ),
                ("timestamp", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("user_id", models.IntegerField(blank=True, null=True)),
                (
                    "client_version",
                    models.CharField(
                        blank=True,
                        help_text="Mobile SDK version",
                        max_length=50,
                        null=True,
                    ),
                ),
                ("ip_address", models.GenericIPAddressField(blank=True, null=True)),
                ("user_agent", models.CharField(blank=True, max_length=500, null=True)),
                ("response_time_ms", models.IntegerField(blank=True, null=True)),
            ],
            options={
                "verbose_name": "API Deprecation Usage",
                "verbose_name_plural": "API Deprecation Usage Logs",
                "db_table": "api_deprecation_usage",
            },
        ),
        migrations.CreateModel(
            name="APIKey",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "name",
                    models.CharField(
                        help_text="Descriptive name for this API key", max_length=100
                    ),
                ),
                (
                    "key_hash",
                    models.CharField(
                        help_text="SHA-256 hash of the API key",
                        max_length=64,
                        unique=True,
                    ),
                ),
                (
                    "secret",
                    models.CharField(
                        help_text="Secret for request signing (HMAC)", max_length=64
                    ),
                ),
                (
                    "is_active",
                    models.BooleanField(
                        default=True, help_text="Whether this API key is active"
                    ),
                ),
                (
                    "require_signing",
                    models.BooleanField(
                        default=False,
                        help_text="Whether requests must be signed with HMAC",
                    ),
                ),
                (
                    "allowed_ips",
                    django.contrib.postgres.fields.ArrayField(
                        base_field=models.GenericIPAddressField(),
                        blank=True,
                        help_text="List of allowed IP addresses (null = all allowed)",
                        null=True,
                        size=None,
                    ),
                ),
                (
                    "permissions",
                    models.JSONField(
                        default=dict, help_text="Permissions granted to this API key"
                    ),
                ),
                (
                    "expires_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="When this API key expires (null = never)",
                        null=True,
                    ),
                ),
                (
                    "last_used_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="Last time this API key was used",
                        null=True,
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, help_text="When this API key was created"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(
                        auto_now=True, help_text="When this API key was last updated"
                    ),
                ),
            ],
            options={
                "db_table": "api_keys",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="ApprovalAction",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "cdtz",
                    models.DateTimeField(
                        default=apps.peoples.models.base_model.now,
                        help_text="When this record was created",
                        verbose_name="Created date",
                    ),
                ),
                (
                    "mdtz",
                    models.DateTimeField(
                        default=apps.peoples.models.base_model.now,
                        help_text="When this record was last modified",
                        verbose_name="Modified date",
                    ),
                ),
                (
                    "ctzoffset",
                    models.IntegerField(
                        default=-1,
                        help_text="User's timezone offset in minutes",
                        verbose_name="Timezone offset",
                    ),
                ),
                (
                    "decision",
                    models.CharField(
                        choices=[("APPROVE", "Approve"), ("DENY", "Deny")],
                        max_length=10,
                        verbose_name="Decision",
                    ),
                ),
                (
                    "comment",
                    models.TextField(
                        blank=True,
                        default="",
                        help_text="Optional explanation for this decision",
                        verbose_name="Comment",
                    ),
                ),
                (
                    "decided_at",
                    models.DateTimeField(auto_now_add=True, verbose_name="Decided At"),
                ),
            ],
            options={
                "verbose_name": "Approval Action",
                "verbose_name_plural": "Approval Actions",
                "db_table": "admin_approval_action",
                "ordering": ["-decided_at"],
                "abstract": False,
            },
        ),
        migrations.CreateModel(
            name="ApprovalRequest",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "cdtz",
                    models.DateTimeField(
                        default=apps.peoples.models.base_model.now,
                        help_text="When this record was created",
                        verbose_name="Created date",
                    ),
                ),
                (
                    "mdtz",
                    models.DateTimeField(
                        default=apps.peoples.models.base_model.now,
                        help_text="When this record was last modified",
                        verbose_name="Modified date",
                    ),
                ),
                (
                    "ctzoffset",
                    models.IntegerField(
                        default=-1,
                        help_text="User's timezone offset in minutes",
                        verbose_name="Timezone offset",
                    ),
                ),
                (
                    "action_description",
                    models.TextField(
                        help_text="Plain English description of the action (e.g., 'Delete 50 old tickets')",
                        verbose_name="What You Want to Do",
                    ),
                ),
                (
                    "reason",
                    models.TextField(
                        help_text="Business justification for this action",
                        verbose_name="Why You Need to Do This",
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("WAITING", "Waiting for Approval"),
                            ("APPROVED", "Approved"),
                            ("DENIED", "Denied"),
                            ("EXPIRED", "Expired"),
                            ("COMPLETED", "Completed"),
                        ],
                        db_index=True,
                        default="WAITING",
                        max_length=20,
                        verbose_name="Status",
                    ),
                ),
                (
                    "denial_reason",
                    models.TextField(
                        blank=True,
                        default="",
                        help_text="Why this request was denied",
                        verbose_name="Denial Reason",
                    ),
                ),
                (
                    "target_model",
                    models.CharField(
                        help_text="Django model to act on (e.g., 'tickets.Ticket')",
                        max_length=100,
                        verbose_name="Target Model",
                    ),
                ),
                (
                    "target_ids",
                    models.JSONField(
                        default=list,
                        encoder=django.core.serializers.json.DjangoJSONEncoder,
                        help_text="List of record IDs to act on",
                        verbose_name="Target IDs",
                    ),
                ),
                (
                    "callback_task_name",
                    models.CharField(
                        help_text="Celery task to execute after approval",
                        max_length=200,
                        verbose_name="Callback Task",
                    ),
                ),
                (
                    "expires_at",
                    models.DateTimeField(
                        help_text="Request auto-expires after this time",
                        verbose_name="Expires At",
                    ),
                ),
                (
                    "requested_at",
                    models.DateTimeField(
                        auto_now_add=True, verbose_name="Requested At"
                    ),
                ),
            ],
            options={
                "verbose_name": "Approval Request",
                "verbose_name_plural": "Approval Requests",
                "db_table": "admin_approval_request",
                "ordering": ["-requested_at"],
                "abstract": False,
            },
        ),
        migrations.CreateModel(
            name="AuditLog",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True,
                        help_text="When this record was created",
                        verbose_name="Created at",
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(
                        auto_now=True,
                        help_text="When this record was last modified",
                        verbose_name="Updated at",
                    ),
                ),
                (
                    "ctzoffset",
                    models.IntegerField(
                        default=-1,
                        help_text="User's timezone offset in minutes",
                        verbose_name="Timezone offset",
                    ),
                ),
                (
                    "correlation_id",
                    models.UUIDField(
                        db_index=True,
                        default=uuid.uuid4,
                        help_text="Unique ID for grouping related events",
                    ),
                ),
                (
                    "event_type",
                    models.CharField(
                        choices=[
                            ("CREATED", "Entity Created"),
                            ("UPDATED", "Entity Updated"),
                            ("DELETED", "Entity Deleted"),
                            ("STATE_CHANGED", "State Transition"),
                            ("BULK_OPERATION", "Bulk Operation"),
                            ("PERMISSION_DENIED", "Permission Denied"),
                            ("DATA_ACCESSED", "Data Accessed"),
                            ("EXPORT_EXECUTED", "Data Export"),
                        ],
                        db_index=True,
                        max_length=30,
                    ),
                ),
                (
                    "level",
                    models.CharField(
                        choices=[
                            ("INFO", "Information"),
                            ("WARNING", "Warning"),
                            ("ERROR", "Error"),
                            ("CRITICAL", "Critical"),
                            ("SECURITY", "Security Event"),
                        ],
                        db_index=True,
                        default="INFO",
                        max_length=20,
                    ),
                ),
                ("object_id", models.CharField(blank=True, max_length=100, null=True)),
                ("session_id", models.CharField(blank=True, max_length=100)),
                ("ip_address", models.GenericIPAddressField(blank=True, null=True)),
                ("user_agent", models.TextField(blank=True)),
                (
                    "action",
                    models.CharField(
                        blank=True,
                        default="",
                        help_text="Action performed",
                        max_length=100,
                    ),
                ),
                (
                    "message",
                    models.TextField(
                        blank=True, default="", help_text="Human-readable description"
                    ),
                ),
                (
                    "changes",
                    models.JSONField(
                        default=dict,
                        encoder=django.core.serializers.json.DjangoJSONEncoder,
                        help_text="Fields changed with before/after values",
                    ),
                ),
                (
                    "metadata",
                    models.JSONField(
                        default=dict,
                        encoder=django.core.serializers.json.DjangoJSONEncoder,
                        help_text="Additional context data",
                    ),
                ),
                (
                    "security_flags",
                    django.contrib.postgres.fields.ArrayField(
                        base_field=models.CharField(max_length=50),
                        blank=True,
                        default=list,
                        help_text='Security-relevant flags (e.g., ["suspicious_activity", "privilege_escalation"])',
                        size=None,
                    ),
                ),
                (
                    "timestamp",
                    models.DateTimeField(
                        db_index=True, default=django.utils.timezone.now
                    ),
                ),
                (
                    "duration_ms",
                    models.IntegerField(
                        blank=True,
                        help_text="Operation duration in milliseconds",
                        null=True,
                    ),
                ),
                (
                    "retention_until",
                    models.DateTimeField(
                        db_index=True, help_text="When this log can be archived/deleted"
                    ),
                ),
                ("is_archived", models.BooleanField(db_index=True, default=False)),
            ],
            options={
                "verbose_name": "Audit Log",
                "verbose_name_plural": "Audit Logs",
                "db_table": "audit_log",
                "ordering": ["-timestamp"],
            },
        ),
        migrations.CreateModel(
            name="BulkOperationAudit",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True,
                        help_text="When this record was created",
                        verbose_name="Created at",
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(
                        auto_now=True,
                        help_text="When this record was last modified",
                        verbose_name="Updated at",
                    ),
                ),
                (
                    "ctzoffset",
                    models.IntegerField(
                        default=-1,
                        help_text="User's timezone offset in minutes",
                        verbose_name="Timezone offset",
                    ),
                ),
                (
                    "operation_type",
                    models.CharField(
                        default="unknown",
                        help_text="Type of bulk operation (approve, reject, assign, etc.)",
                        max_length=50,
                    ),
                ),
                ("entity_type", models.CharField(default="unknown", max_length=50)),
                (
                    "total_items",
                    models.IntegerField(
                        default=0, help_text="Total items in operation"
                    ),
                ),
                (
                    "successful_items",
                    models.IntegerField(default=0, help_text="Successfully processed"),
                ),
                (
                    "failed_items",
                    models.IntegerField(default=0, help_text="Failed to process"),
                ),
                (
                    "successful_ids",
                    django.contrib.postgres.fields.ArrayField(
                        base_field=models.CharField(max_length=100),
                        blank=True,
                        default=list,
                        help_text="IDs of successfully processed items",
                        size=None,
                    ),
                ),
                (
                    "failed_ids",
                    django.contrib.postgres.fields.ArrayField(
                        base_field=models.CharField(max_length=100),
                        blank=True,
                        default=list,
                        help_text="IDs of failed items",
                        size=None,
                    ),
                ),
                (
                    "failure_details",
                    models.JSONField(
                        default=dict,
                        encoder=django.core.serializers.json.DjangoJSONEncoder,
                        help_text="Detailed error messages for failed items",
                    ),
                ),
                ("was_rolled_back", models.BooleanField(default=False)),
                ("rollback_reason", models.TextField(blank=True)),
            ],
            options={
                "verbose_name": "Bulk Operation Audit",
                "verbose_name_plural": "Bulk Operation Audits",
                "db_table": "bulk_operation_audit",
            },
        ),
        migrations.CreateModel(
            name="CacheAnomalyLog",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("pattern_name", models.CharField(db_index=True, max_length=100)),
                (
                    "anomaly_type",
                    models.CharField(
                        choices=[
                            ("low_hit_ratio", "Low Hit Ratio"),
                            ("high_miss_rate", "High Miss Rate"),
                            ("memory_spike", "Memory Usage Spike"),
                            ("ttl_mismatch", "TTL Configuration Mismatch"),
                            ("key_explosion", "Excessive Key Count"),
                        ],
                        db_index=True,
                        max_length=50,
                    ),
                ),
                (
                    "detected_at",
                    models.DateTimeField(
                        db_index=True, default=django.utils.timezone.now
                    ),
                ),
                (
                    "severity",
                    models.CharField(
                        choices=[
                            ("low", "Low"),
                            ("medium", "Medium"),
                            ("high", "High"),
                            ("critical", "Critical"),
                        ],
                        default="medium",
                        max_length=20,
                    ),
                ),
                (
                    "hit_ratio_at_detection",
                    models.DecimalField(
                        blank=True, decimal_places=4, max_digits=5, null=True
                    ),
                ),
                ("description", models.TextField()),
                ("recommendation", models.TextField(blank=True)),
                ("resolved", models.BooleanField(db_index=True, default=False)),
                ("resolved_at", models.DateTimeField(blank=True, null=True)),
                ("resolution_notes", models.TextField(blank=True)),
            ],
            options={
                "verbose_name": "Cache Anomaly",
                "verbose_name_plural": "Cache Anomalies",
                "db_table": "core_cache_anomaly_log",
                "ordering": ["-detected_at"],
            },
        ),
        migrations.CreateModel(
            name="CacheMetrics",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("pattern_name", models.CharField(db_index=True, max_length=100)),
                ("pattern_key", models.CharField(max_length=200)),
                (
                    "timestamp",
                    models.DateTimeField(
                        db_index=True, default=django.utils.timezone.now
                    ),
                ),
                (
                    "interval",
                    models.CharField(
                        choices=[
                            ("hourly", "Hourly"),
                            ("daily", "Daily"),
                            ("weekly", "Weekly"),
                        ],
                        db_index=True,
                        default="hourly",
                        max_length=20,
                    ),
                ),
                ("total_hits", models.BigIntegerField(default=0)),
                ("total_misses", models.BigIntegerField(default=0)),
                (
                    "hit_ratio",
                    models.DecimalField(decimal_places=4, default=0, max_digits=5),
                ),
                (
                    "avg_ttl_at_hit",
                    models.IntegerField(
                        default=0,
                        help_text="Average TTL remaining when cache hit occurs",
                    ),
                ),
                ("configured_ttl", models.IntegerField(default=0)),
                (
                    "memory_bytes",
                    models.BigIntegerField(
                        default=0, help_text="Estimated memory usage for pattern"
                    ),
                ),
                (
                    "key_count",
                    models.IntegerField(
                        default=0, help_text="Number of active keys for pattern"
                    ),
                ),
            ],
            options={
                "verbose_name": "Cache Metric",
                "verbose_name_plural": "Cache Metrics",
                "db_table": "core_cache_metrics",
                "ordering": ["-timestamp"],
            },
        ),
        migrations.CreateModel(
            name="CameraFingerprint",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "fingerprint_hash",
                    models.CharField(
                        db_index=True,
                        help_text="Unique hash identifying the camera device",
                        max_length=32,
                        unique=True,
                    ),
                ),
                ("camera_make", models.CharField(db_index=True, max_length=100)),
                ("camera_model", models.CharField(db_index=True, max_length=100)),
                ("first_seen", models.DateTimeField(default=django.utils.timezone.now)),
                ("last_seen", models.DateTimeField(auto_now=True, db_index=True)),
                ("usage_count", models.PositiveIntegerField(default=1)),
                (
                    "trust_level",
                    models.CharField(
                        choices=[
                            ("trusted", "Trusted Device"),
                            ("neutral", "Neutral Device"),
                            ("suspicious", "Suspicious Device"),
                            ("blocked", "Blocked Device"),
                        ],
                        db_index=True,
                        default="neutral",
                        max_length=20,
                    ),
                ),
                (
                    "fraud_incidents",
                    models.PositiveIntegerField(
                        default=0,
                        help_text="Number of fraud incidents associated with this device",
                    ),
                ),
                (
                    "device_characteristics",
                    models.JSONField(
                        default=dict, help_text="Technical characteristics and patterns"
                    ),
                ),
                (
                    "security_notes",
                    models.TextField(
                        blank=True, help_text="Security notes and incident history"
                    ),
                ),
            ],
            options={
                "verbose_name": "Camera Fingerprint",
                "verbose_name_plural": "Camera Fingerprints",
                "db_table": "core_camera_fingerprint",
                "ordering": ["-last_seen"],
            },
        ),
        migrations.CreateModel(
            name="ConflictResolutionLog",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "mobile_id",
                    models.UUIDField(help_text="Mobile record ID involved in conflict"),
                ),
                ("domain", models.CharField(help_text="Data domain", max_length=50)),
                (
                    "server_version",
                    models.IntegerField(help_text="Server version at conflict time"),
                ),
                (
                    "client_version",
                    models.IntegerField(help_text="Client version at conflict time"),
                ),
                (
                    "resolution_strategy",
                    models.CharField(
                        help_text="Strategy used to resolve conflict", max_length=50
                    ),
                ),
                (
                    "resolution_result",
                    models.CharField(
                        choices=[
                            ("resolved", "Automatically Resolved"),
                            ("manual_required", "Manual Resolution Required"),
                            ("failed", "Resolution Failed"),
                        ],
                        help_text="Outcome of resolution attempt",
                        max_length=20,
                    ),
                ),
                (
                    "winning_version",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("client", "Client Version"),
                            ("server", "Server Version"),
                            ("merged", "Merged Version"),
                            ("none", "No Resolution"),
                        ],
                        help_text="Which version won the conflict",
                        max_length=20,
                        null=True,
                    ),
                ),
                (
                    "merge_details",
                    models.JSONField(
                        blank=True, default=dict, help_text="Detailed merge information"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "verbose_name": "Conflict Resolution Log",
                "verbose_name_plural": "Conflict Resolution Logs",
                "db_table": "sync_conflict_resolution_log",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="ContentRecommendation",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "content_type",
                    models.CharField(
                        choices=[
                            ("page", "Page"),
                            ("feature", "Feature"),
                            ("tool", "Tool"),
                            ("report", "Report"),
                            ("dashboard", "Dashboard"),
                        ],
                        max_length=20,
                    ),
                ),
                ("content_title", models.CharField(max_length=200)),
                ("content_url", models.URLField()),
                ("content_description", models.TextField(blank=True)),
                (
                    "reason",
                    models.TextField(help_text="Why this content is recommended"),
                ),
                (
                    "relevance_score",
                    models.FloatField(
                        validators=[
                            django.core.validators.MinValueValidator(0.0),
                            django.core.validators.MaxValueValidator(1.0),
                        ]
                    ),
                ),
                (
                    "recommendation_algorithm",
                    models.CharField(default="collaborative_filtering", max_length=50),
                ),
                (
                    "recommended_context",
                    models.JSONField(
                        default=dict,
                        help_text="Context when recommendation should be shown",
                    ),
                ),
                ("display_conditions", models.JSONField(default=dict)),
                ("shown_count", models.IntegerField(default=0)),
                ("clicked_count", models.IntegerField(default=0)),
                ("dismissed_count", models.IntegerField(default=0)),
                ("last_shown", models.DateTimeField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("expires_at", models.DateTimeField(blank=True, null=True)),
                ("is_active", models.BooleanField(default=True)),
            ],
            options={
                "db_table": "core_content_recommendation",
                "ordering": ["-relevance_score", "-created_at"],
            },
        ),
        migrations.CreateModel(
            name="CronJobDefinition",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "name",
                    models.CharField(
                        help_text="Unique name for this cron job", max_length=200
                    ),
                ),
                (
                    "description",
                    models.TextField(
                        blank=True,
                        help_text="Detailed description of what this job does",
                    ),
                ),
                (
                    "cron_expression",
                    models.CharField(
                        help_text="Standard cron expression (e.g., '0 0 * * *' for daily at midnight)",
                        max_length=100,
                        validators=[
                            apps.core.utils_new.cron_utilities.validate_cron_for_form
                        ],
                    ),
                ),
                (
                    "job_type",
                    models.CharField(
                        choices=[
                            ("management_command", "Management Command"),
                            ("background_task", "Background Task"),
                            ("celery_task", "Celery Task"),
                            ("custom_function", "Custom Function"),
                            ("api_call", "API Call"),
                        ],
                        default="management_command",
                        max_length=20,
                    ),
                ),
                (
                    "command_name",
                    models.CharField(
                        blank=True,
                        help_text="Management command name (for management_command type)",
                        max_length=200,
                    ),
                ),
                (
                    "command_args",
                    models.JSONField(
                        blank=True,
                        default=list,
                        help_text="Command arguments as JSON array",
                    ),
                ),
                (
                    "command_kwargs",
                    models.JSONField(
                        blank=True,
                        default=dict,
                        help_text="Command keyword arguments as JSON object",
                    ),
                ),
                (
                    "task_name",
                    models.CharField(
                        blank=True,
                        help_text="Background/Celery task name",
                        max_length=200,
                    ),
                ),
                (
                    "task_args",
                    models.JSONField(
                        blank=True,
                        default=list,
                        help_text="Task arguments as JSON array",
                    ),
                ),
                (
                    "task_kwargs",
                    models.JSONField(
                        blank=True,
                        default=dict,
                        help_text="Task keyword arguments as JSON object",
                    ),
                ),
                (
                    "timeout_seconds",
                    models.PositiveIntegerField(
                        default=3600, help_text="Maximum execution time in seconds"
                    ),
                ),
                (
                    "max_retries",
                    models.PositiveSmallIntegerField(
                        default=3, help_text="Maximum number of retry attempts"
                    ),
                ),
                (
                    "retry_delay_seconds",
                    models.PositiveIntegerField(
                        default=60, help_text="Delay between retries in seconds"
                    ),
                ),
                (
                    "priority",
                    models.CharField(
                        choices=[
                            ("low", "Low"),
                            ("normal", "Normal"),
                            ("high", "High"),
                            ("critical", "Critical"),
                        ],
                        default="normal",
                        max_length=10,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("active", "Active"),
                            ("inactive", "Inactive"),
                            ("paused", "Paused"),
                            ("error", "Error"),
                            ("deprecated", "Deprecated"),
                        ],
                        default="active",
                        max_length=15,
                    ),
                ),
                (
                    "is_enabled",
                    models.BooleanField(
                        default=True, help_text="Whether this job is currently enabled"
                    ),
                ),
                (
                    "environment",
                    models.CharField(
                        default="all",
                        help_text="Target environment (dev, staging, prod, all)",
                        max_length=20,
                    ),
                ),
                (
                    "tags",
                    models.JSONField(
                        blank=True,
                        default=list,
                        help_text="Tags for categorization and filtering",
                    ),
                ),
                (
                    "last_execution_time",
                    models.DateTimeField(
                        blank=True,
                        help_text="When this job was last executed",
                        null=True,
                    ),
                ),
                (
                    "next_execution_time",
                    models.DateTimeField(
                        blank=True,
                        help_text="When this job is scheduled to run next",
                        null=True,
                    ),
                ),
                (
                    "execution_count",
                    models.PositiveIntegerField(
                        default=0,
                        help_text="Total number of times this job has been executed",
                    ),
                ),
                (
                    "success_count",
                    models.PositiveIntegerField(
                        default=0, help_text="Number of successful executions"
                    ),
                ),
                (
                    "failure_count",
                    models.PositiveIntegerField(
                        default=0, help_text="Number of failed executions"
                    ),
                ),
                (
                    "average_duration_seconds",
                    models.FloatField(
                        blank=True,
                        help_text="Average execution duration in seconds",
                        null=True,
                    ),
                ),
                (
                    "created_by",
                    models.CharField(
                        help_text="User or system that created this job", max_length=100
                    ),
                ),
                (
                    "modified_by",
                    models.CharField(
                        blank=True,
                        help_text="User or system that last modified this job",
                        max_length=100,
                    ),
                ),
                (
                    "version",
                    models.PositiveSmallIntegerField(
                        default=1, help_text="Version number for change tracking"
                    ),
                ),
            ],
            options={
                "db_table": "core_cron_job_definition",
            },
        ),
        migrations.CreateModel(
            name="CronJobExecution",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "execution_id",
                    models.CharField(
                        help_text="Unique execution identifier (UUID)",
                        max_length=36,
                        unique=True,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("running", "Running"),
                            ("success", "Success"),
                            ("failed", "Failed"),
                            ("timeout", "Timeout"),
                            ("cancelled", "Cancelled"),
                            ("retry", "Retry"),
                        ],
                        default="pending",
                        max_length=15,
                    ),
                ),
                (
                    "execution_context",
                    models.CharField(
                        choices=[
                            ("scheduled", "Scheduled"),
                            ("manual", "Manual"),
                            ("retry", "Retry"),
                            ("test", "Test"),
                            ("migration", "Migration"),
                        ],
                        default="scheduled",
                        max_length=15,
                    ),
                ),
                (
                    "scheduled_time",
                    models.DateTimeField(
                        help_text="When this execution was scheduled to run"
                    ),
                ),
                (
                    "started_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="When execution actually started",
                        null=True,
                    ),
                ),
                (
                    "completed_at",
                    models.DateTimeField(
                        blank=True, help_text="When execution completed", null=True
                    ),
                ),
                (
                    "duration_seconds",
                    models.FloatField(
                        blank=True, help_text="Execution duration in seconds", null=True
                    ),
                ),
                (
                    "hostname",
                    models.CharField(
                        blank=True,
                        help_text="Hostname where job was executed",
                        max_length=100,
                    ),
                ),
                (
                    "process_id",
                    models.PositiveIntegerField(
                        blank=True, help_text="Process ID of the execution", null=True
                    ),
                ),
                (
                    "worker_name",
                    models.CharField(
                        blank=True,
                        help_text="Name of the worker that executed the job",
                        max_length=100,
                    ),
                ),
                (
                    "exit_code",
                    models.IntegerField(
                        blank=True,
                        help_text="Exit code (0 for success, non-zero for failure)",
                        null=True,
                    ),
                ),
                (
                    "stdout_output",
                    models.TextField(
                        blank=True,
                        help_text="Standard output (truncated if too long)",
                        max_length=10000,
                    ),
                ),
                (
                    "stderr_output",
                    models.TextField(
                        blank=True,
                        help_text="Standard error output (truncated if too long)",
                        max_length=10000,
                    ),
                ),
                (
                    "error_message",
                    models.TextField(
                        blank=True, help_text="Error message if execution failed"
                    ),
                ),
                (
                    "retry_count",
                    models.PositiveSmallIntegerField(
                        default=0, help_text="Number of retries for this execution"
                    ),
                ),
                (
                    "execution_metadata",
                    models.JSONField(
                        blank=True,
                        default=dict,
                        help_text="Additional execution metadata",
                    ),
                ),
                (
                    "memory_usage_mb",
                    models.FloatField(
                        blank=True, help_text="Peak memory usage in MB", null=True
                    ),
                ),
                (
                    "cpu_usage_percent",
                    models.FloatField(
                        blank=True, help_text="Average CPU usage percentage", null=True
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True,
                        help_text="When this execution record was created",
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(
                        auto_now=True,
                        help_text="When this execution record was last updated",
                    ),
                ),
            ],
            options={
                "db_table": "core_cron_job_execution",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="CSPViolation",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "document_uri",
                    models.URLField(
                        help_text="URI of the document where violation occurred",
                        max_length=2000,
                    ),
                ),
                (
                    "referrer",
                    models.URLField(
                        blank=True,
                        help_text="Referrer of the document",
                        max_length=2000,
                    ),
                ),
                (
                    "violated_directive",
                    models.CharField(
                        help_text="The directive that was violated", max_length=500
                    ),
                ),
                (
                    "effective_directive",
                    models.CharField(
                        help_text="The effective directive after fallback",
                        max_length=500,
                    ),
                ),
                (
                    "original_policy",
                    models.TextField(help_text="The original CSP policy"),
                ),
                (
                    "blocked_uri",
                    models.CharField(help_text="URI that was blocked", max_length=2000),
                ),
                (
                    "source_file",
                    models.URLField(
                        blank=True,
                        help_text="Source file where violation occurred",
                        max_length=2000,
                    ),
                ),
                (
                    "line_number",
                    models.IntegerField(
                        default=0, help_text="Line number in source file"
                    ),
                ),
                (
                    "column_number",
                    models.IntegerField(
                        default=0, help_text="Column number in source file"
                    ),
                ),
                (
                    "status_code",
                    models.IntegerField(
                        default=0, help_text="HTTP status code of the document"
                    ),
                ),
                (
                    "script_sample",
                    models.TextField(
                        blank=True, help_text="Sample of the violating script"
                    ),
                ),
                (
                    "ip_address",
                    models.GenericIPAddressField(help_text="IP address of the client"),
                ),
                (
                    "user_agent",
                    models.TextField(blank=True, help_text="User agent of the client"),
                ),
                (
                    "reported_at",
                    models.DateTimeField(
                        default=django.utils.timezone.now,
                        help_text="When the violation was reported",
                    ),
                ),
                (
                    "severity",
                    models.CharField(
                        choices=[
                            ("CRITICAL", "Critical - Potential Attack"),
                            ("HIGH", "High - Risky Behavior"),
                            ("MEDIUM", "Medium - Policy Violation"),
                            ("LOW", "Low - Minor Issue"),
                        ],
                        default="MEDIUM",
                        help_text="Severity of the violation",
                        max_length=20,
                    ),
                ),
                (
                    "reviewed",
                    models.BooleanField(
                        default=False,
                        help_text="Whether this violation has been reviewed",
                    ),
                ),
                (
                    "false_positive",
                    models.BooleanField(
                        default=False, help_text="Whether this is a false positive"
                    ),
                ),
                (
                    "notes",
                    models.TextField(
                        blank=True, help_text="Admin notes about this violation"
                    ),
                ),
            ],
            options={
                "db_table": "security_csp_violations",
                "ordering": ["-reported_at"],
            },
        ),
        migrations.CreateModel(
            name="DashboardSavedView",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "cdtz",
                    models.DateTimeField(
                        default=apps.peoples.models.base_model.now,
                        help_text="When this record was created",
                        verbose_name="Created date",
                    ),
                ),
                (
                    "mdtz",
                    models.DateTimeField(
                        default=apps.peoples.models.base_model.now,
                        help_text="When this record was last modified",
                        verbose_name="Modified date",
                    ),
                ),
                (
                    "ctzoffset",
                    models.IntegerField(
                        default=-1,
                        help_text="User's timezone offset in minutes",
                        verbose_name="Timezone offset",
                    ),
                ),
                (
                    "name",
                    models.CharField(
                        help_text="Descriptive name for this saved view",
                        max_length=200,
                        verbose_name="View Name",
                    ),
                ),
                (
                    "description",
                    models.TextField(
                        blank=True,
                        default="",
                        help_text="Optional description of what this view shows",
                        verbose_name="Description",
                    ),
                ),
                (
                    "view_type",
                    models.CharField(
                        choices=[
                            ("PORTFOLIO", "Portfolio Overview"),
                            ("SITE", "Site Operations"),
                            ("ATTENDANCE", "Attendance"),
                            ("TOURS", "Tours"),
                            ("TASKS", "Tasks"),
                            ("TICKETS", "Tickets"),
                            ("WORK_ORDERS", "Work Orders"),
                            ("REPORTS", "Reports"),
                            ("NOC", "NOC Dashboard"),
                            ("CUSTOM", "Custom"),
                        ],
                        db_index=True,
                        default="CUSTOM",
                        max_length=20,
                        verbose_name="View Type",
                    ),
                ),
                (
                    "scope_config",
                    models.JSONField(
                        default=dict,
                        encoder=django.core.serializers.json.DjangoJSONEncoder,
                        help_text="Tenant, clients, sites, time range, shift selections",
                        verbose_name="Scope Configuration",
                    ),
                ),
                (
                    "filters",
                    models.JSONField(
                        default=dict,
                        encoder=django.core.serializers.json.DjangoJSONEncoder,
                        help_text="Domain-specific filters (status, priority, etc.)",
                        verbose_name="Filters",
                    ),
                ),
                (
                    "visible_panels",
                    models.JSONField(
                        default=list,
                        encoder=django.core.serializers.json.DjangoJSONEncoder,
                        help_text="Array of panel IDs to display",
                        verbose_name="Visible Panels",
                    ),
                ),
                (
                    "sort_order",
                    models.JSONField(
                        default=list,
                        encoder=django.core.serializers.json.DjangoJSONEncoder,
                        help_text="Column sort configuration",
                        verbose_name="Sort Order",
                    ),
                ),
                (
                    "sharing_level",
                    models.CharField(
                        choices=[
                            ("PRIVATE", "Private (Only me)"),
                            ("TEAM", "Share with my team"),
                            ("SITE", "Share with site users"),
                            ("CLIENT", "Share with client users"),
                            ("PUBLIC", "Public (All users)"),
                        ],
                        db_index=True,
                        default="PRIVATE",
                        max_length=20,
                        verbose_name="Sharing Level",
                    ),
                ),
                (
                    "is_default",
                    models.BooleanField(
                        default=False,
                        help_text="Load this view by default for the user",
                        verbose_name="Is Default View",
                    ),
                ),
                (
                    "view_count",
                    models.PositiveIntegerField(
                        default=0,
                        help_text="Number of times this view was accessed",
                        verbose_name="View Count",
                    ),
                ),
                (
                    "last_accessed_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="Last time this view was loaded",
                        null=True,
                        verbose_name="Last Accessed At",
                    ),
                ),
                (
                    "page_url",
                    models.CharField(
                        help_text="URL path where this view applies",
                        max_length=500,
                        verbose_name="Page URL",
                    ),
                ),
                (
                    "email_frequency",
                    models.CharField(
                        choices=[
                            ("NONE", "No Email"),
                            ("DAILY", "Daily Summary"),
                            ("WEEKLY", "Weekly Summary"),
                            ("MONTHLY", "Monthly Summary"),
                        ],
                        default="NONE",
                        help_text="How often to email this view's data",
                        max_length=20,
                        verbose_name="Email Frequency",
                    ),
                ),
                (
                    "last_email_sent_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="When the last scheduled email was sent",
                        null=True,
                        verbose_name="Last Email Sent At",
                    ),
                ),
                (
                    "export_format",
                    models.CharField(
                        choices=[
                            ("NONE", "No Export"),
                            ("CSV", "CSV File"),
                            ("EXCEL", "Excel Spreadsheet"),
                            ("PDF", "PDF Report"),
                        ],
                        default="NONE",
                        help_text="Format for automated exports",
                        max_length=20,
                        verbose_name="Export Format",
                    ),
                ),
                (
                    "export_schedule",
                    models.CharField(
                        blank=True,
                        default="",
                        help_text="Cron expression for export schedule (e.g., '0 8 * * 1' for Mondays at 8am)",
                        max_length=100,
                        verbose_name="Export Schedule",
                    ),
                ),
                (
                    "last_export_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="When the last export was generated",
                        null=True,
                        verbose_name="Last Export At",
                    ),
                ),
            ],
            options={
                "verbose_name": "Dashboard Saved View",
                "verbose_name_plural": "Dashboard Saved Views",
                "db_table": "dashboard_saved_view",
                "ordering": ["-last_accessed_at", "-cdtz"],
                "abstract": False,
            },
        ),
        migrations.CreateModel(
            name="DeviceSyncState",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("domain", models.CharField(help_text="Data domain", max_length=50)),
                ("entity_id", models.UUIDField(help_text="Entity identifier")),
                (
                    "last_sync_version",
                    models.IntegerField(
                        default=0, help_text="Version number at last sync"
                    ),
                ),
                (
                    "last_modified_at",
                    models.DateTimeField(help_text="Last modification timestamp"),
                ),
                (
                    "is_dirty",
                    models.BooleanField(
                        default=False, help_text="Has unsynced changes"
                    ),
                ),
                (
                    "checksum",
                    models.CharField(
                        blank=True,
                        help_text="Data checksum for integrity",
                        max_length=64,
                    ),
                ),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "verbose_name": "Device Sync State",
                "verbose_name_plural": "Device Sync States",
                "db_table": "device_sync_state",
                "ordering": ["-last_modified_at"],
            },
        ),
        migrations.CreateModel(
            name="EncryptedSecret",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "key_name",
                    models.CharField(
                        db_index=True,
                        help_text="Environment variable name (e.g., GOOGLE_API_KEY)",
                        max_length=100,
                        unique=True,
                        validators=[
                            django.core.validators.RegexValidator(
                                message="Key name must be UPPER_SNAKE_CASE (e.g., GOOGLE_API_KEY)",
                                regex="^[A-Z][A-Z0-9_]*$",
                            )
                        ],
                    ),
                ),
                (
                    "display_name",
                    models.CharField(
                        help_text="Human-readable name (e.g., 'Google Gemini API Key')",
                        max_length=200,
                    ),
                ),
                (
                    "description",
                    models.TextField(
                        blank=True,
                        help_text="Description of what this secret is used for",
                    ),
                ),
                (
                    "secret_type",
                    models.CharField(
                        choices=[
                            ("api_key", "API Key"),
                            ("oauth_token", "OAuth Token"),
                            ("webhook_secret", "Webhook Secret"),
                            ("encryption_key", "Encryption Key"),
                            ("database_password", "Database Password"),
                            ("other", "Other Secret"),
                        ],
                        db_index=True,
                        default="api_key",
                        max_length=50,
                    ),
                ),
                (
                    "provider",
                    models.CharField(
                        choices=[
                            ("google_gemini", "Google Gemini"),
                            ("anthropic_claude", "Anthropic Claude"),
                            ("openai", "OpenAI"),
                            ("twilio", "Twilio"),
                            ("aws_ses", "AWS SES"),
                            ("google_maps", "Google Maps"),
                            ("frappe_erp", "Frappe/ERPNext"),
                            ("redis", "Redis"),
                            ("mqtt", "MQTT Broker"),
                            ("other", "Other Service"),
                        ],
                        db_index=True,
                        help_text="Service/provider this secret belongs to",
                        max_length=50,
                    ),
                ),
                (
                    "encrypted_value",
                    apps.core.fields.encrypted_fields.EncryptedCharField(
                        help_text="Encrypted secret value (uses Fernet encryption)",
                        max_length=1024,
                    ),
                ),
                (
                    "is_active",
                    models.BooleanField(
                        db_index=True,
                        default=True,
                        help_text="Whether this secret is currently active",
                    ),
                ),
                (
                    "is_validated",
                    models.BooleanField(
                        default=False,
                        help_text="Whether secret was validated (API key tested)",
                    ),
                ),
                (
                    "last_validated_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="Last time secret was validated",
                        null=True,
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True, db_index=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "environment",
                    models.CharField(
                        choices=[
                            ("development", "Development"),
                            ("staging", "Staging"),
                            ("production", "Production"),
                        ],
                        db_index=True,
                        default="production",
                        help_text="Environment this secret applies to",
                        max_length=20,
                    ),
                ),
                (
                    "expires_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="Optional expiration date for secret rotation",
                        null=True,
                    ),
                ),
            ],
            options={
                "verbose_name": "Encrypted Secret",
                "verbose_name_plural": "Encrypted Secrets",
                "db_table": "core_encrypted_secret",
                "ordering": ["provider", "key_name"],
            },
        ),
        migrations.CreateModel(
            name="EncryptionKeyMetadata",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "key_id",
                    models.CharField(
                        db_index=True,
                        help_text="Unique identifier for the encryption key",
                        max_length=255,
                        unique=True,
                    ),
                ),
                (
                    "is_active",
                    models.BooleanField(
                        db_index=True,
                        default=False,
                        help_text="Whether this key is currently active for encryption/decryption",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        default=django.utils.timezone.now,
                        help_text="When the key was created",
                    ),
                ),
                (
                    "activated_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="When the key was activated for use",
                        null=True,
                    ),
                ),
                (
                    "expires_at",
                    models.DateTimeField(
                        help_text="When the key should expire and be rotated"
                    ),
                ),
                (
                    "rotated_at",
                    models.DateTimeField(
                        blank=True, help_text="When the key was rotated out", null=True
                    ),
                ),
                (
                    "rotation_status",
                    models.CharField(
                        choices=[
                            ("created", "Created - Not Yet Active"),
                            ("active", "Active - Current Key"),
                            ("rotating", "Rotating - Migration In Progress"),
                            ("retired", "Retired - No Longer Used"),
                            ("expired", "Expired - Past Expiration Date"),
                        ],
                        db_index=True,
                        default="created",
                        help_text="Current status of the key in rotation lifecycle",
                        max_length=50,
                    ),
                ),
                (
                    "replaced_by_key_id",
                    models.CharField(
                        blank=True,
                        help_text="Key ID that replaced this key during rotation",
                        max_length=255,
                        null=True,
                    ),
                ),
                (
                    "rotation_notes",
                    models.TextField(
                        blank=True, help_text="Notes about key rotation process"
                    ),
                ),
                (
                    "data_encrypted_count",
                    models.BigIntegerField(
                        default=0,
                        help_text="Approximate count of records encrypted with this key",
                    ),
                ),
                (
                    "last_used_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="Last time this key was used for encryption/decryption",
                        null=True,
                    ),
                ),
            ],
            options={
                "verbose_name": "Encryption Key Metadata",
                "verbose_name_plural": "Encryption Key Metadata",
                "db_table": "encryption_key_metadata",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="FileUploadAuditLog",
            fields=[
                ("id", models.BigAutoField(primary_key=True, serialize=False)),
                ("correlation_id", models.UUIDField(db_index=True)),
                (
                    "timestamp",
                    models.DateTimeField(
                        db_index=True, default=django.utils.timezone.now
                    ),
                ),
                (
                    "event_type",
                    models.CharField(
                        choices=[
                            ("UPLOAD_ATTEMPT", "Upload Attempt"),
                            ("UPLOAD_SUCCESS", "Upload Successful"),
                            ("UPLOAD_FAILED", "Upload Failed"),
                            ("VALIDATION_FAILED", "Validation Failed"),
                            ("PATH_TRAVERSAL_BLOCKED", "Path Traversal Blocked"),
                            ("MALWARE_DETECTED", "Malware Detected"),
                            ("QUARANTINED", "File Quarantined"),
                            ("FILE_DELETED", "File Deleted"),
                        ],
                        db_index=True,
                        max_length=50,
                    ),
                ),
                (
                    "severity",
                    models.CharField(
                        choices=[
                            ("INFO", "Information"),
                            ("WARNING", "Warning"),
                            ("ERROR", "Error"),
                            ("CRITICAL", "Critical"),
                        ],
                        db_index=True,
                        max_length=20,
                    ),
                ),
                ("ip_address", models.GenericIPAddressField(null=True)),
                ("user_agent", models.TextField(blank=True)),
                ("filename", models.CharField(db_index=True, max_length=255)),
                ("original_filename", models.CharField(max_length=255)),
                ("file_size", models.BigIntegerField(null=True)),
                ("file_type", models.CharField(max_length=50)),
                ("mime_type", models.CharField(blank=True, max_length=100)),
                ("file_path", models.TextField(blank=True)),
                ("upload_context", models.JSONField(default=dict)),
                ("validation_results", models.JSONField(default=dict)),
                ("security_analysis", models.JSONField(default=dict)),
                ("malware_scan_results", models.JSONField(default=dict)),
                ("error_message", models.TextField(blank=True)),
                ("additional_metadata", models.JSONField(default=dict)),
            ],
            options={
                "db_table": "file_upload_audit_log",
                "ordering": ["-timestamp"],
            },
        ),
        migrations.CreateModel(
            name="HealthCheckLog",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("check_name", models.CharField(db_index=True, max_length=100)),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("healthy", "Healthy"),
                            ("degraded", "Degraded"),
                            ("error", "Error"),
                        ],
                        db_index=True,
                        max_length=20,
                    ),
                ),
                ("message", models.TextField()),
                ("details", models.JSONField(blank=True, default=dict)),
                (
                    "duration_ms",
                    models.FloatField(
                        validators=[django.core.validators.MinValueValidator(0)]
                    ),
                ),
                (
                    "checked_at",
                    models.DateTimeField(
                        db_index=True, default=django.utils.timezone.now
                    ),
                ),
                ("correlation_id", models.UUIDField(blank=True, null=True)),
            ],
            options={
                "verbose_name": "Health Check Log",
                "verbose_name_plural": "Health Check Logs",
                "db_table": "core_health_check_log",
                "ordering": ["-checked_at"],
            },
        ),
        migrations.CreateModel(
            name="ImageMetadata",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "correlation_id",
                    models.CharField(
                        db_index=True,
                        help_text="Unique correlation ID for tracking and debugging",
                        max_length=36,
                        unique=True,
                    ),
                ),
                (
                    "image_path",
                    models.CharField(
                        db_index=True,
                        help_text="Original file path of the analyzed image",
                        max_length=500,
                    ),
                ),
                (
                    "file_hash",
                    models.CharField(
                        db_index=True,
                        help_text="SHA256 hash for file integrity verification",
                        max_length=32,
                    ),
                ),
                (
                    "file_size",
                    models.PositiveIntegerField(help_text="File size in bytes"),
                ),
                (
                    "file_extension",
                    models.CharField(
                        help_text="File extension (e.g., .jpg, .png)", max_length=10
                    ),
                ),
                (
                    "activity_record_id",
                    models.PositiveIntegerField(
                        blank=True,
                        db_index=True,
                        help_text="Associated activity/attendance record ID",
                        null=True,
                    ),
                ),
                (
                    "upload_context",
                    models.CharField(
                        blank=True,
                        db_index=True,
                        help_text="Context of image upload (attendance, facility_audit, etc.)",
                        max_length=50,
                        null=True,
                    ),
                ),
                (
                    "gps_coordinates",
                    django.contrib.gis.db.models.fields.PointField(
                        blank=True,
                        help_text="GPS coordinates from EXIF data",
                        null=True,
                        srid=4326,
                    ),
                ),
                (
                    "gps_altitude",
                    models.FloatField(
                        blank=True, help_text="GPS altitude in meters", null=True
                    ),
                ),
                (
                    "gps_accuracy",
                    models.FloatField(
                        blank=True, help_text="GPS accuracy in meters", null=True
                    ),
                ),
                (
                    "gps_timestamp",
                    models.DateTimeField(
                        blank=True, help_text="GPS timestamp from EXIF data", null=True
                    ),
                ),
                (
                    "camera_make",
                    models.CharField(
                        blank=True,
                        db_index=True,
                        help_text="Camera manufacturer",
                        max_length=100,
                        null=True,
                    ),
                ),
                (
                    "camera_model",
                    models.CharField(
                        blank=True,
                        db_index=True,
                        help_text="Camera model",
                        max_length=100,
                        null=True,
                    ),
                ),
                (
                    "camera_serial",
                    models.CharField(
                        blank=True,
                        help_text="Camera serial number (hashed for privacy)",
                        max_length=100,
                        null=True,
                    ),
                ),
                (
                    "software_signature",
                    models.CharField(
                        blank=True,
                        db_index=True,
                        help_text="Software used to process the image",
                        max_length=200,
                        null=True,
                    ),
                ),
                (
                    "photo_timestamp",
                    models.DateTimeField(
                        blank=True,
                        db_index=True,
                        help_text="Original photo timestamp from EXIF",
                        null=True,
                    ),
                ),
                (
                    "timestamp_consistency",
                    models.BooleanField(
                        default=True, help_text="Whether EXIF timestamps are consistent"
                    ),
                ),
                (
                    "server_upload_time",
                    models.DateTimeField(
                        auto_now_add=True,
                        db_index=True,
                        help_text="Server timestamp when metadata was processed",
                    ),
                ),
                (
                    "authenticity_score",
                    models.FloatField(
                        db_index=True,
                        default=0.5,
                        help_text="Photo authenticity score (0.0 = fake, 1.0 = authentic)",
                        validators=[
                            django.core.validators.MinValueValidator(0.0),
                            django.core.validators.MaxValueValidator(1.0),
                        ],
                    ),
                ),
                (
                    "manipulation_risk",
                    models.CharField(
                        choices=[
                            ("low", "Low Risk"),
                            ("medium", "Medium Risk"),
                            ("high", "High Risk"),
                            ("critical", "Critical Risk"),
                        ],
                        db_index=True,
                        default="low",
                        help_text="Risk level for photo manipulation",
                        max_length=20,
                    ),
                ),
                (
                    "validation_status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending Analysis"),
                            ("valid", "Valid Metadata"),
                            ("invalid", "Invalid Metadata"),
                            ("suspicious", "Suspicious Content"),
                            ("error", "Analysis Error"),
                        ],
                        db_index=True,
                        default="pending",
                        help_text="Overall validation status of the photo",
                        max_length=20,
                    ),
                ),
                (
                    "raw_exif_data",
                    models.JSONField(
                        default=dict,
                        help_text="Complete raw EXIF data extracted from image",
                    ),
                ),
                (
                    "security_analysis",
                    models.JSONField(
                        default=dict,
                        help_text="Security analysis results and fraud indicators",
                    ),
                ),
                (
                    "quality_metrics",
                    models.JSONField(
                        default=dict,
                        help_text="Image quality assessment and metadata completeness",
                    ),
                ),
                (
                    "analysis_timestamp",
                    models.DateTimeField(
                        db_index=True,
                        default=django.utils.timezone.now,
                        help_text="When the EXIF analysis was performed",
                    ),
                ),
                (
                    "analysis_version",
                    models.CharField(
                        default="1.0",
                        help_text="Version of analysis algorithm used",
                        max_length=20,
                    ),
                ),
            ],
            options={
                "verbose_name": "Image Metadata",
                "verbose_name_plural": "Image Metadata Records",
                "db_table": "core_image_metadata",
                "ordering": ["-analysis_timestamp"],
            },
        ),
        migrations.CreateModel(
            name="ImageQualityAssessment",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "overall_quality_score",
                    models.FloatField(
                        help_text="Overall quality score (0.0 - 1.0)",
                        validators=[
                            django.core.validators.MinValueValidator(0.0),
                            django.core.validators.MaxValueValidator(1.0),
                        ],
                    ),
                ),
                (
                    "quality_level",
                    models.CharField(
                        choices=[
                            ("excellent", "Excellent Quality"),
                            ("good", "Good Quality"),
                            ("fair", "Fair Quality"),
                            ("poor", "Poor Quality"),
                            ("unacceptable", "Unacceptable Quality"),
                        ],
                        db_index=True,
                        max_length=20,
                    ),
                ),
                (
                    "metadata_completeness",
                    models.FloatField(
                        help_text="EXIF metadata completeness score",
                        validators=[
                            django.core.validators.MinValueValidator(0.0),
                            django.core.validators.MaxValueValidator(1.0),
                        ],
                    ),
                ),
                (
                    "gps_data_quality",
                    models.FloatField(
                        help_text="GPS data quality and precision score",
                        validators=[
                            django.core.validators.MinValueValidator(0.0),
                            django.core.validators.MaxValueValidator(1.0),
                        ],
                    ),
                ),
                (
                    "timestamp_reliability",
                    models.FloatField(
                        help_text="Timestamp consistency and reliability score",
                        validators=[
                            django.core.validators.MinValueValidator(0.0),
                            django.core.validators.MaxValueValidator(1.0),
                        ],
                    ),
                ),
                (
                    "quality_issues",
                    models.JSONField(
                        default=list, help_text="List of identified quality issues"
                    ),
                ),
                (
                    "recommendations",
                    models.JSONField(
                        default=list,
                        help_text="Actionable recommendations for improvement",
                    ),
                ),
                (
                    "assessment_timestamp",
                    models.DateTimeField(default=django.utils.timezone.now),
                ),
                (
                    "assessment_algorithm",
                    models.CharField(
                        default="exif_v1.0",
                        help_text="Algorithm version used for assessment",
                        max_length=50,
                    ),
                ),
            ],
            options={
                "verbose_name": "Image Quality Assessment",
                "verbose_name_plural": "Image Quality Assessments",
                "db_table": "core_image_quality_assessment",
            },
        ),
        migrations.CreateModel(
            name="LLMQuota",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "provider",
                    models.CharField(
                        choices=[
                            ("openai", "OpenAI"),
                            ("anthropic", "Anthropic"),
                            ("gemini", "Google Gemini"),
                        ],
                        help_text="LLM provider",
                        max_length=50,
                    ),
                ),
                (
                    "daily_request_limit",
                    models.IntegerField(
                        default=1000, help_text="Maximum requests per day"
                    ),
                ),
                (
                    "monthly_request_limit",
                    models.IntegerField(
                        default=30000, help_text="Maximum requests per month"
                    ),
                ),
                (
                    "daily_cost_limit_usd",
                    models.DecimalField(
                        decimal_places=2,
                        default=Decimal("50.00"),
                        help_text="Maximum cost per day in USD",
                        max_digits=10,
                    ),
                ),
                (
                    "monthly_cost_limit_usd",
                    models.DecimalField(
                        decimal_places=2,
                        default=Decimal("1000.00"),
                        help_text="Maximum cost per month in USD",
                        max_digits=10,
                    ),
                ),
                (
                    "enabled",
                    models.BooleanField(
                        default=True, help_text="Quota enforcement enabled"
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "verbose_name": "LLM Quota",
                "verbose_name_plural": "LLM Quotas",
                "db_table": "llm_quota",
            },
        ),
        migrations.CreateModel(
            name="LLMUsageLog",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "provider",
                    models.CharField(
                        choices=[
                            ("openai", "OpenAI"),
                            ("anthropic", "Anthropic"),
                            ("gemini", "Google Gemini"),
                        ],
                        help_text="LLM provider used",
                        max_length=50,
                    ),
                ),
                (
                    "operation",
                    models.CharField(
                        help_text="Operation type (e.g., 'generate_changeset', 'review_changeset')",
                        max_length=100,
                    ),
                ),
                (
                    "input_tokens",
                    models.IntegerField(help_text="Number of input tokens"),
                ),
                (
                    "output_tokens",
                    models.IntegerField(help_text="Number of output tokens"),
                ),
                (
                    "cost_usd",
                    models.DecimalField(
                        decimal_places=6,
                        help_text="Cost in USD for this API call",
                        max_digits=10,
                    ),
                ),
                (
                    "latency_ms",
                    models.FloatField(help_text="API call latency in milliseconds"),
                ),
                (
                    "metadata",
                    models.JSONField(
                        default=dict,
                        help_text="Additional metadata (model version, user_id, etc.)",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True,
                        db_index=True,
                        help_text="When the API call was made",
                    ),
                ),
            ],
            options={
                "verbose_name": "LLM Usage Log",
                "verbose_name_plural": "LLM Usage Logs",
                "db_table": "llm_usage_log",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="MonitoringAPIAccessLog",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "endpoint",
                    models.CharField(help_text="Endpoint accessed", max_length=200),
                ),
                (
                    "method",
                    models.CharField(help_text="HTTP method used", max_length=10),
                ),
                (
                    "ip_address",
                    models.GenericIPAddressField(help_text="IP address of the request"),
                ),
                (
                    "user_agent",
                    models.TextField(blank=True, help_text="User agent string"),
                ),
                (
                    "response_status",
                    models.IntegerField(help_text="HTTP response status code"),
                ),
                (
                    "response_time_ms",
                    models.IntegerField(help_text="Response time in milliseconds"),
                ),
                (
                    "timestamp",
                    models.DateTimeField(
                        auto_now_add=True,
                        db_index=True,
                        help_text="When the access occurred",
                    ),
                ),
                (
                    "correlation_id",
                    models.CharField(
                        blank=True,
                        help_text="Request correlation ID for tracing",
                        max_length=36,
                    ),
                ),
                (
                    "metadata",
                    models.JSONField(
                        blank=True,
                        default=dict,
                        help_text="Additional request metadata",
                    ),
                ),
            ],
            options={
                "verbose_name": "Monitoring API Access Log",
                "verbose_name_plural": "Monitoring API Access Logs",
                "db_table": "monitoring_api_access_logs",
                "ordering": ["-timestamp"],
            },
        ),
        migrations.CreateModel(
            name="MonitoringAPIKey",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "name",
                    models.CharField(
                        help_text="Descriptive name (e.g., 'Prometheus Production', 'Grafana Dashboard')",
                        max_length=100,
                    ),
                ),
                (
                    "description",
                    models.TextField(
                        blank=True, help_text="Purpose and usage notes for this API key"
                    ),
                ),
                (
                    "key_hash",
                    models.CharField(
                        db_index=True,
                        help_text="SHA-256 hash of the API key",
                        max_length=64,
                        unique=True,
                    ),
                ),
                (
                    "monitoring_system",
                    models.CharField(
                        choices=[
                            ("prometheus", "Prometheus"),
                            ("grafana", "Grafana"),
                            ("datadog", "Datadog"),
                            ("new_relic", "New Relic"),
                            ("cloudwatch", "AWS CloudWatch"),
                            ("stackdriver", "Google Cloud Monitoring"),
                            ("custom", "Custom Monitoring System"),
                        ],
                        default="custom",
                        help_text="Type of monitoring system using this key",
                        max_length=50,
                    ),
                ),
                (
                    "permissions",
                    django.contrib.postgres.fields.ArrayField(
                        base_field=models.CharField(
                            choices=[
                                ("health", "Health Check Access"),
                                ("metrics", "Metrics Access"),
                                ("performance", "Performance Data Access"),
                                ("alerts", "Alerts Access"),
                                ("dashboard", "Dashboard Data Access"),
                                ("admin", "Full Monitoring Admin Access"),
                            ],
                            max_length=50,
                        ),
                        default=list,
                        help_text="List of monitoring permissions granted to this key",
                        size=None,
                    ),
                ),
                (
                    "allowed_ips",
                    django.contrib.postgres.fields.ArrayField(
                        base_field=models.GenericIPAddressField(),
                        blank=True,
                        help_text="Whitelisted IP addresses (null = all IPs allowed)",
                        null=True,
                        size=None,
                    ),
                ),
                (
                    "is_active",
                    models.BooleanField(
                        default=True,
                        help_text="Whether this API key is currently active",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, help_text="When this API key was created"
                    ),
                ),
                (
                    "expires_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="When this API key expires (null = never expires)",
                        null=True,
                    ),
                ),
                (
                    "last_used_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="Last time this API key was used",
                        null=True,
                    ),
                ),
                (
                    "usage_count",
                    models.IntegerField(
                        default=0,
                        help_text="Total number of times this key has been used",
                    ),
                ),
                (
                    "rotation_schedule",
                    models.CharField(
                        choices=[
                            ("never", "Never Rotate"),
                            ("monthly", "Monthly Rotation"),
                            ("quarterly", "Quarterly Rotation"),
                            ("yearly", "Yearly Rotation"),
                        ],
                        default="quarterly",
                        help_text="Automatic rotation schedule",
                        max_length=20,
                    ),
                ),
                (
                    "next_rotation_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="When this key should be rotated next",
                        null=True,
                    ),
                ),
                (
                    "rotation_grace_period_hours",
                    models.IntegerField(
                        default=168,
                        help_text="Hours to keep old key valid after rotation (default: 1 week)",
                    ),
                ),
                (
                    "metadata",
                    models.JSONField(
                        blank=True,
                        default=dict,
                        help_text="Additional metadata (contact info, escalation procedures, etc.)",
                    ),
                ),
            ],
            options={
                "verbose_name": "Monitoring API Key",
                "verbose_name_plural": "Monitoring API Keys",
                "db_table": "monitoring_api_keys",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="NavigationRecommendation",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "recommendation_type",
                    models.CharField(
                        choices=[
                            ("page_suggestion", "Page Suggestion"),
                            ("menu_optimization", "Menu Optimization"),
                            ("search_enhancement", "Search Enhancement"),
                            ("layout_improvement", "Layout Improvement"),
                            ("content_personalization", "Content Personalization"),
                        ],
                        max_length=30,
                    ),
                ),
                ("title", models.CharField(max_length=200)),
                ("description", models.TextField()),
                ("target_page", models.URLField(blank=True, null=True)),
                ("target_element", models.CharField(blank=True, max_length=200)),
                ("target_user_segment", models.JSONField(default=dict)),
                ("suggested_action", models.TextField()),
                ("implementation_details", models.JSONField(default=dict)),
                ("expected_impact", models.TextField()),
                (
                    "confidence_score",
                    models.FloatField(
                        help_text="Confidence in the recommendation (0.0 - 1.0)",
                        validators=[
                            django.core.validators.MinValueValidator(0.0),
                            django.core.validators.MaxValueValidator(1.0),
                        ],
                    ),
                ),
                ("supporting_data", models.JSONField(default=dict)),
                ("user_behavior_data", models.JSONField(default=dict)),
                (
                    "priority",
                    models.CharField(
                        choices=[
                            ("low", "Low"),
                            ("medium", "Medium"),
                            ("high", "High"),
                            ("critical", "Critical"),
                        ],
                        default="medium",
                        max_length=10,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("approved", "Approved"),
                            ("implemented", "Implemented"),
                            ("rejected", "Rejected"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("valid_until", models.DateTimeField(blank=True, null=True)),
            ],
            options={
                "db_table": "core_navigation_recommendation",
                "ordering": ["-priority", "-confidence_score", "-created_at"],
            },
        ),
        migrations.CreateModel(
            name="PermissionDenialAudit",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True,
                        help_text="When this record was created",
                        verbose_name="Created at",
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(
                        auto_now=True,
                        help_text="When this record was last modified",
                        verbose_name="Updated at",
                    ),
                ),
                (
                    "ctzoffset",
                    models.IntegerField(
                        default=-1,
                        help_text="User's timezone offset in minutes",
                        verbose_name="Timezone offset",
                    ),
                ),
                (
                    "required_permissions",
                    django.contrib.postgres.fields.ArrayField(
                        base_field=models.CharField(max_length=100),
                        default=list,
                        help_text="Permissions that were required",
                        size=None,
                    ),
                ),
                (
                    "user_permissions",
                    django.contrib.postgres.fields.ArrayField(
                        base_field=models.CharField(max_length=100),
                        blank=True,
                        default=list,
                        help_text="Permissions the user actually has",
                        size=None,
                    ),
                ),
                (
                    "attempted_action",
                    models.CharField(default="unknown", max_length=100),
                ),
                ("request_path", models.CharField(default="/", max_length=500)),
                ("request_method", models.CharField(default="GET", max_length=10)),
                (
                    "is_suspicious",
                    models.BooleanField(
                        db_index=True,
                        default=False,
                        help_text="Flagged as potentially suspicious activity",
                    ),
                ),
                (
                    "risk_score",
                    models.IntegerField(
                        default=0,
                        help_text="Risk score (0-100, higher = more suspicious)",
                    ),
                ),
            ],
            options={
                "verbose_name": "Permission Denial Audit",
                "verbose_name_plural": "Permission Denial Audits",
                "db_table": "permission_denial_audit",
            },
        ),
        migrations.CreateModel(
            name="PhotoAuthenticityLog",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "validation_action",
                    models.CharField(
                        choices=[
                            ("automatic", "Automatic Validation"),
                            ("manual_review", "Manual Review"),
                            ("location_check", "Location Verification"),
                            ("device_check", "Device Fingerprint Check"),
                            ("historical", "Historical Pattern Analysis"),
                        ],
                        db_index=True,
                        max_length=30,
                    ),
                ),
                (
                    "validation_result",
                    models.CharField(
                        choices=[
                            ("passed", "Validation Passed"),
                            ("failed", "Validation Failed"),
                            ("flagged", "Flagged for Review"),
                            ("pending", "Pending Review"),
                        ],
                        db_index=True,
                        max_length=20,
                    ),
                ),
                (
                    "review_timestamp",
                    models.DateTimeField(
                        db_index=True, default=django.utils.timezone.now
                    ),
                ),
                (
                    "validation_details",
                    models.JSONField(
                        default=dict,
                        help_text="Detailed validation results and analysis",
                    ),
                ),
                (
                    "confidence_score",
                    models.FloatField(
                        default=0.5,
                        help_text="Confidence in validation result",
                        validators=[
                            django.core.validators.MinValueValidator(0.0),
                            django.core.validators.MaxValueValidator(1.0),
                        ],
                    ),
                ),
                (
                    "validation_notes",
                    models.TextField(
                        blank=True, help_text="Manual review notes or system comments"
                    ),
                ),
                (
                    "follow_up_required",
                    models.BooleanField(
                        db_index=True,
                        default=False,
                        help_text="Whether this validation requires follow-up action",
                    ),
                ),
            ],
            options={
                "verbose_name": "Photo Authenticity Log",
                "verbose_name_plural": "Photo Authenticity Logs",
                "db_table": "core_photo_authenticity_log",
                "ordering": ["-review_timestamp"],
            },
        ),
        migrations.CreateModel(
            name="PlanRegressionAlert",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "query_hash",
                    models.BigIntegerField(
                        db_index=True,
                        help_text="Query hash that experienced regression",
                    ),
                ),
                (
                    "performance_degradation",
                    models.DecimalField(
                        decimal_places=2,
                        help_text="Performance degradation percentage",
                        max_digits=8,
                    ),
                ),
                (
                    "regression_type",
                    models.CharField(
                        choices=[
                            ("execution_time", "Execution Time Regression"),
                            ("plan_change", "Plan Structure Change"),
                            ("index_not_used", "Index No Longer Used"),
                            ("sequential_scan", "Sequential Scan Introduced"),
                            ("temp_storage", "Temporary Storage Usage"),
                        ],
                        help_text="Type of regression detected",
                        max_length=50,
                    ),
                ),
                (
                    "detected_at",
                    models.DateTimeField(
                        db_index=True,
                        default=django.utils.timezone.now,
                        help_text="When the regression was detected",
                    ),
                ),
                (
                    "severity",
                    models.CharField(
                        choices=[
                            ("info", "Informational"),
                            ("warning", "Warning - Performance Degraded"),
                            ("critical", "Critical - Severe Regression"),
                        ],
                        db_index=True,
                        default="warning",
                        help_text="Regression severity level",
                        max_length=20,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("new", "New"),
                            ("acknowledged", "Acknowledged"),
                            ("investigating", "Under Investigation"),
                            ("resolved", "Resolved"),
                            ("false_positive", "False Positive"),
                        ],
                        db_index=True,
                        default="new",
                        help_text="Current alert status",
                        max_length=20,
                    ),
                ),
                (
                    "acknowledged_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="When this alert was acknowledged",
                        null=True,
                    ),
                ),
                (
                    "resolution_notes",
                    models.TextField(
                        blank=True, help_text="Notes about investigation and resolution"
                    ),
                ),
            ],
            options={
                "verbose_name": "Plan Regression Alert",
                "verbose_name_plural": "Plan Regression Alerts",
                "db_table": "plan_regression_alerts",
                "ordering": ["-detected_at"],
            },
        ),
        migrations.CreateModel(
            name="PushDeliveryLog",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("device_id", models.CharField(db_index=True, max_length=255)),
                (
                    "push_type",
                    models.CharField(
                        choices=[
                            ("data_update", "Data Update"),
                            ("sync_trigger", "Sync Trigger"),
                            ("conflict_alert", "Conflict Alert"),
                            ("system_notification", "System Notification"),
                        ],
                        max_length=50,
                    ),
                ),
                ("domain", models.CharField(blank=True, max_length=50, null=True)),
                ("delivered", models.BooleanField(default=False)),
                (
                    "delivery_latency_ms",
                    models.IntegerField(
                        blank=True,
                        help_text="Time to deliver in milliseconds",
                        null=True,
                    ),
                ),
                ("error_message", models.TextField(blank=True, null=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "verbose_name": "Push Delivery Log",
                "verbose_name_plural": "Push Delivery Logs",
                "db_table": "push_delivery_log",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="PushSubscription",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "device_id",
                    models.CharField(
                        db_index=True,
                        help_text="Unique device identifier",
                        max_length=255,
                    ),
                ),
                (
                    "domain",
                    models.CharField(
                        choices=[
                            ("journal", "Journal Entries"),
                            ("attendance", "Attendance Records"),
                            ("task", "Tasks"),
                            ("ticket", "Help Desk Tickets"),
                            ("work_order", "Work Orders"),
                            ("all", "All Domains"),
                        ],
                        help_text="Data domain for subscription",
                        max_length=50,
                    ),
                ),
                (
                    "active",
                    models.BooleanField(
                        default=True, help_text="Subscription active status"
                    ),
                ),
                (
                    "battery_saver_mode",
                    models.BooleanField(
                        default=False,
                        help_text="Reduce push frequency for battery saving",
                    ),
                ),
                (
                    "priority_filter",
                    models.CharField(
                        choices=[
                            ("all", "All Priorities"),
                            ("high", "High Priority Only"),
                            ("critical", "Critical Only"),
                        ],
                        default="all",
                        help_text="Priority level filter",
                        max_length=20,
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "verbose_name": "Push Subscription",
                "verbose_name_plural": "Push Subscriptions",
                "db_table": "push_subscription",
            },
        ),
        migrations.CreateModel(
            name="QualityMetric",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "timestamp",
                    models.DateTimeField(
                        db_index=True,
                        default=django.utils.timezone.now,
                        help_text="When this metric was recorded",
                    ),
                ),
                (
                    "code_quality_score",
                    models.FloatField(
                        default=0,
                        help_text="Overall code quality score (0-100)",
                        validators=[
                            django.core.validators.MinValueValidator(0),
                            django.core.validators.MaxValueValidator(100),
                        ],
                    ),
                ),
                (
                    "test_coverage",
                    models.FloatField(
                        default=0,
                        help_text="Test code coverage percentage",
                        validators=[
                            django.core.validators.MinValueValidator(0),
                            django.core.validators.MaxValueValidator(100),
                        ],
                    ),
                ),
                (
                    "complexity_score",
                    models.FloatField(
                        default=0, help_text="Average cyclomatic complexity"
                    ),
                ),
                (
                    "security_issues",
                    models.IntegerField(
                        default=0, help_text="Total number of security issues found"
                    ),
                ),
                (
                    "security_critical",
                    models.IntegerField(
                        default=0,
                        help_text="Count of critical severity security issues",
                    ),
                ),
                (
                    "security_high",
                    models.IntegerField(
                        default=0, help_text="Count of high severity security issues"
                    ),
                ),
                (
                    "file_violations",
                    models.IntegerField(
                        default=0, help_text="Number of file size compliance violations"
                    ),
                ),
                (
                    "overall_grade",
                    models.CharField(
                        choices=[
                            ("A", "Excellent"),
                            ("B", "Good"),
                            ("C", "Acceptable"),
                            ("D", "Poor"),
                            ("F", "Failing"),
                        ],
                        default="C",
                        help_text="Overall quality grade (A-F)",
                        max_length=1,
                    ),
                ),
                (
                    "overall_score",
                    models.FloatField(
                        default=0,
                        help_text="Overall quality score (0-100)",
                        validators=[
                            django.core.validators.MinValueValidator(0),
                            django.core.validators.MaxValueValidator(100),
                        ],
                    ),
                ),
                (
                    "report_json",
                    models.JSONField(
                        default=dict, help_text="Full report data as JSON"
                    ),
                ),
                (
                    "is_weekly",
                    models.BooleanField(
                        default=False,
                        help_text="Whether this is a weekly (vs daily) snapshot",
                    ),
                ),
            ],
            options={
                "verbose_name_plural": "Quality Metrics",
                "ordering": ["-timestamp"],
            },
        ),
        migrations.CreateModel(
            name="QueryExecutionPlan",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "query_hash",
                    models.BigIntegerField(
                        db_index=True,
                        help_text="PostgreSQL query hash (queryid from pg_stat_statements)",
                    ),
                ),
                (
                    "plan_hash",
                    models.CharField(
                        db_index=True,
                        help_text="Hash of the execution plan structure",
                        max_length=64,
                    ),
                ),
                (
                    "query_text",
                    models.TextField(
                        help_text="Full query text (truncated if necessary)"
                    ),
                ),
                (
                    "execution_plan",
                    models.JSONField(help_text="Full EXPLAIN ANALYZE output as JSON"),
                ),
                (
                    "plan_summary",
                    models.TextField(help_text="Human-readable plan summary"),
                ),
                (
                    "execution_time",
                    models.DecimalField(
                        decimal_places=2,
                        help_text="Actual execution time in milliseconds",
                        max_digits=10,
                    ),
                ),
                (
                    "planning_time",
                    models.DecimalField(
                        decimal_places=2,
                        help_text="Query planning time in milliseconds",
                        max_digits=10,
                    ),
                ),
                (
                    "total_cost",
                    models.DecimalField(
                        decimal_places=2,
                        help_text="PostgreSQL cost estimate",
                        max_digits=15,
                    ),
                ),
                (
                    "rows_returned",
                    models.BigIntegerField(
                        default=0, help_text="Number of rows returned"
                    ),
                ),
                (
                    "shared_hit_blocks",
                    models.BigIntegerField(
                        default=0, help_text="Shared buffer blocks hit"
                    ),
                ),
                (
                    "shared_read_blocks",
                    models.BigIntegerField(
                        default=0, help_text="Shared buffer blocks read"
                    ),
                ),
                (
                    "temp_read_blocks",
                    models.BigIntegerField(
                        default=0, help_text="Temporary blocks read"
                    ),
                ),
                (
                    "temp_written_blocks",
                    models.BigIntegerField(
                        default=0, help_text="Temporary blocks written"
                    ),
                ),
                (
                    "captured_at",
                    models.DateTimeField(
                        db_index=True,
                        default=django.utils.timezone.now,
                        help_text="When this plan was captured",
                    ),
                ),
                (
                    "capture_method",
                    models.CharField(
                        choices=[
                            ("automatic", "Automatic (slow query detection)"),
                            ("manual", "Manual capture"),
                            ("scheduled", "Scheduled analysis"),
                        ],
                        default="automatic",
                        help_text="How this plan was captured",
                        max_length=20,
                    ),
                ),
                (
                    "optimization_opportunities",
                    models.JSONField(
                        blank=True,
                        default=list,
                        help_text="List of identified optimization opportunities",
                    ),
                ),
                (
                    "regression_detected",
                    models.BooleanField(
                        db_index=True,
                        default=False,
                        help_text="Whether this plan represents a performance regression",
                    ),
                ),
            ],
            options={
                "verbose_name": "Query Execution Plan",
                "verbose_name_plural": "Query Execution Plans",
                "db_table": "query_execution_plans",
                "ordering": ["-captured_at"],
            },
        ),
        migrations.CreateModel(
            name="QueryPattern",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "pattern_hash",
                    models.CharField(
                        db_index=True,
                        help_text="Hash of normalized query pattern",
                        max_length=64,
                        unique=True,
                    ),
                ),
                (
                    "pattern_text",
                    models.TextField(
                        help_text="Normalized query pattern with placeholders"
                    ),
                ),
                (
                    "query_type",
                    models.CharField(
                        db_index=True,
                        help_text="Type of query (SELECT, INSERT, UPDATE, DELETE, etc.)",
                        max_length=20,
                    ),
                ),
                (
                    "first_seen",
                    models.DateTimeField(
                        default=django.utils.timezone.now,
                        help_text="When this pattern was first observed",
                    ),
                ),
                (
                    "last_seen",
                    models.DateTimeField(
                        default=django.utils.timezone.now,
                        help_text="When this pattern was last observed",
                    ),
                ),
                (
                    "total_queries",
                    models.BigIntegerField(
                        default=0,
                        help_text="Total number of queries matching this pattern",
                    ),
                ),
                (
                    "avg_execution_time",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        help_text="Average execution time for this pattern",
                        max_digits=10,
                    ),
                ),
            ],
            options={
                "verbose_name": "Query Pattern",
                "verbose_name_plural": "Query Patterns",
                "db_table": "query_patterns",
                "ordering": ["-total_queries"],
            },
        ),
        migrations.CreateModel(
            name="QueryPerformanceSnapshot",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "snapshot_time",
                    models.DateTimeField(
                        db_index=True,
                        default=django.utils.timezone.now,
                        help_text="When this snapshot was taken",
                    ),
                ),
                (
                    "query_hash",
                    models.BigIntegerField(
                        db_index=True,
                        help_text="PostgreSQL query hash (queryid from pg_stat_statements)",
                    ),
                ),
                (
                    "query_text",
                    models.TextField(
                        help_text="Full query text (truncated if necessary)"
                    ),
                ),
                (
                    "query_preview",
                    models.CharField(
                        help_text="First 200 characters of query for quick identification",
                        max_length=200,
                    ),
                ),
                (
                    "calls",
                    models.BigIntegerField(
                        default=0, help_text="Number of times this query was executed"
                    ),
                ),
                (
                    "total_exec_time",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        help_text="Total execution time in milliseconds",
                        max_digits=15,
                    ),
                ),
                (
                    "mean_exec_time",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        help_text="Average execution time in milliseconds",
                        max_digits=10,
                    ),
                ),
                (
                    "max_exec_time",
                    models.DecimalField(
                        decimal_places=2,
                        default=0,
                        help_text="Maximum execution time in milliseconds",
                        max_digits=10,
                    ),
                ),
                (
                    "rows_returned",
                    models.BigIntegerField(
                        default=0, help_text="Total number of rows returned/affected"
                    ),
                ),
                (
                    "shared_blks_hit",
                    models.BigIntegerField(
                        default=0, help_text="Shared blocks hit (cache hits)"
                    ),
                ),
                (
                    "shared_blks_read",
                    models.BigIntegerField(
                        default=0, help_text="Shared blocks read from disk"
                    ),
                ),
                (
                    "temp_blks_written",
                    models.BigIntegerField(
                        default=0, help_text="Temporary blocks written to disk"
                    ),
                ),
            ],
            options={
                "verbose_name": "Query Performance Snapshot",
                "verbose_name_plural": "Query Performance Snapshots",
                "db_table": "query_performance_snapshots",
                "ordering": ["-snapshot_time"],
            },
        ),
        migrations.CreateModel(
            name="QuickAction",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True,
                        help_text="When this record was created",
                        verbose_name="Created at",
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(
                        auto_now=True,
                        help_text="When this record was last modified",
                        verbose_name="Updated at",
                    ),
                ),
                (
                    "name",
                    models.CharField(
                        help_text="Action verb name (e.g., 'Fix Camera Offline')",
                        max_length=200,
                    ),
                ),
                (
                    "description",
                    models.TextField(
                        help_text="What this action does in plain English"
                    ),
                ),
                (
                    "when_to_use",
                    models.TextField(help_text="When should someone use this action?"),
                ),
                (
                    "is_active",
                    models.BooleanField(
                        default=True, help_text="Is this action available to use?"
                    ),
                ),
                (
                    "available_for_types",
                    models.JSONField(
                        default=list,
                        help_text="ContentType IDs this action applies to (e.g., [ticket, incident])",
                    ),
                ),
                (
                    "automated_steps",
                    models.JSONField(
                        default=list,
                        help_text="Steps that run automatically. Format: [{'action_label': 'Ping camera', 'action_type': 'ping_device', 'params': {...}}]",
                    ),
                ),
                (
                    "manual_steps",
                    models.JSONField(
                        default=list,
                        help_text="Steps users complete manually. Format: [{'instruction': 'Check power LED', 'needs_photo': true, 'needs_note': false}]",
                    ),
                ),
                (
                    "times_used",
                    models.IntegerField(
                        default=0,
                        help_text="How many times this action has been executed",
                    ),
                ),
                (
                    "average_completion_time",
                    models.DurationField(
                        blank=True,
                        help_text="Average time to complete all steps",
                        null=True,
                    ),
                ),
                (
                    "success_rate",
                    models.DecimalField(
                        decimal_places=2,
                        default=0.0,
                        help_text="Percentage of successful executions",
                        max_digits=5,
                    ),
                ),
            ],
            options={
                "verbose_name": "Quick Action",
                "verbose_name_plural": "Quick Actions",
                "ordering": ["-times_used", "name"],
            },
        ),
        migrations.CreateModel(
            name="QuickActionChecklist",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True,
                        help_text="When this record was created",
                        verbose_name="Created at",
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(
                        auto_now=True,
                        help_text="When this record was last modified",
                        verbose_name="Updated at",
                    ),
                ),
                (
                    "steps",
                    models.JSONField(
                        default=list,
                        help_text="Checklist items. Format: [{'instruction': '...', 'completed': true, 'photo_url': '...', 'note': '...'}]",
                    ),
                ),
                (
                    "completion_percentage",
                    models.DecimalField(
                        decimal_places=2,
                        default=0.0,
                        help_text="Percentage of steps completed",
                        max_digits=5,
                    ),
                ),
            ],
            options={
                "verbose_name": "Quick Action Checklist",
                "verbose_name_plural": "Quick Action Checklists",
            },
        ),
        migrations.CreateModel(
            name="QuickActionExecution",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True,
                        help_text="When this record was created",
                        verbose_name="Created at",
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(
                        auto_now=True,
                        help_text="When this record was last modified",
                        verbose_name="Updated at",
                    ),
                ),
                ("object_id", models.PositiveIntegerField()),
                (
                    "automated_results",
                    models.JSONField(
                        default=list, help_text="Results of automated steps"
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Waiting for manual steps"),
                            ("in_progress", "User completing steps"),
                            ("completed", "All done "),
                            ("failed", "Something went wrong"),
                            ("cancelled", "User cancelled"),
                        ],
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("completed_at", models.DateTimeField(blank=True, null=True)),
                (
                    "execution_duration",
                    models.DurationField(
                        blank=True, help_text="How long total execution took", null=True
                    ),
                ),
            ],
            options={
                "verbose_name": "Quick Action Execution",
                "verbose_name_plural": "Quick Action Executions",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="RateLimitBlockedIP",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "ip_address",
                    models.GenericIPAddressField(
                        help_text="Blocked IP address (IPv4 or IPv6)",
                        unique=True,
                        validators=[django.core.validators.validate_ipv46_address],
                    ),
                ),
                (
                    "blocked_at",
                    models.DateTimeField(
                        auto_now_add=True, help_text="When the IP was blocked"
                    ),
                ),
                (
                    "blocked_until",
                    models.DateTimeField(help_text="When the block expires"),
                ),
                (
                    "violation_count",
                    models.PositiveIntegerField(
                        default=0,
                        help_text="Total number of violations that triggered the block",
                    ),
                ),
                (
                    "endpoint_type",
                    models.CharField(
                        default="unknown",
                        help_text="Type of endpoint that triggered the block (admin, api, etc.)",
                        max_length=50,
                    ),
                ),
                (
                    "last_violation_path",
                    models.CharField(
                        blank=True,
                        help_text="Last URL path that triggered a violation",
                        max_length=255,
                    ),
                ),
                (
                    "reason",
                    models.TextField(
                        blank=True, help_text="Reason for blocking (auto-generated)"
                    ),
                ),
                (
                    "is_active",
                    models.BooleanField(
                        default=True, help_text="Whether the block is currently active"
                    ),
                ),
                (
                    "notes",
                    models.TextField(
                        blank=True, help_text="Admin notes about this block"
                    ),
                ),
            ],
            options={
                "verbose_name": "Blocked IP Address",
                "verbose_name_plural": "Blocked IP Addresses",
                "db_table": "core_rate_limit_blocked_ip",
                "ordering": ["-blocked_at"],
            },
        ),
        migrations.CreateModel(
            name="RateLimitTrustedIP",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "ip_address",
                    models.GenericIPAddressField(
                        help_text="Trusted IP address (IPv4 or IPv6)",
                        unique=True,
                        validators=[django.core.validators.validate_ipv46_address],
                    ),
                ),
                (
                    "description",
                    models.CharField(
                        help_text="Description of the trusted source (e.g., 'Internal monitoring service')",
                        max_length=255,
                    ),
                ),
                (
                    "added_at",
                    models.DateTimeField(
                        auto_now_add=True,
                        help_text="When the IP was added to the trusted list",
                    ),
                ),
                (
                    "is_active",
                    models.BooleanField(
                        default=True, help_text="Whether the trust is currently active"
                    ),
                ),
                (
                    "expires_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="Optional expiration date for temporary trust",
                        null=True,
                    ),
                ),
                (
                    "notes",
                    models.TextField(
                        blank=True, help_text="Additional notes about this trusted IP"
                    ),
                ),
            ],
            options={
                "verbose_name": "Trusted IP Address",
                "verbose_name_plural": "Trusted IP Addresses",
                "db_table": "core_rate_limit_trusted_ip",
                "ordering": ["-added_at"],
            },
        ),
        migrations.CreateModel(
            name="RateLimitViolationLog",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "timestamp",
                    models.DateTimeField(
                        auto_now_add=True,
                        db_index=True,
                        help_text="When the violation occurred",
                    ),
                ),
                (
                    "client_ip",
                    models.GenericIPAddressField(
                        help_text="IP address that triggered the violation",
                        validators=[django.core.validators.validate_ipv46_address],
                    ),
                ),
                (
                    "endpoint_path",
                    models.CharField(
                        db_index=True,
                        help_text="The endpoint path that was accessed",
                        max_length=255,
                    ),
                ),
                (
                    "endpoint_type",
                    models.CharField(
                        db_index=True,
                        help_text="Type of endpoint (admin, api, rest, etc.) - legacy query layer retired Oct 2025",
                        max_length=50,
                    ),
                ),
                (
                    "violation_reason",
                    models.CharField(
                        help_text="Reason for violation (ip_rate_limit, user_rate_limit, etc.)",
                        max_length=100,
                    ),
                ),
                (
                    "request_count",
                    models.PositiveIntegerField(
                        help_text="Number of requests at the time of violation"
                    ),
                ),
                (
                    "rate_limit",
                    models.PositiveIntegerField(
                        help_text="The rate limit threshold that was exceeded"
                    ),
                ),
                (
                    "correlation_id",
                    models.CharField(
                        db_index=True,
                        help_text="Correlation ID for request tracking",
                        max_length=36,
                    ),
                ),
                (
                    "user_agent",
                    models.TextField(
                        blank=True,
                        help_text="User agent string of the violating request",
                    ),
                ),
            ],
            options={
                "verbose_name": "Rate Limit Violation",
                "verbose_name_plural": "Rate Limit Violations",
                "db_table": "core_rate_limit_violation_log",
                "ordering": ["-timestamp"],
            },
        ),
        migrations.CreateModel(
            name="RecommendationFeedback",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("object_id", models.PositiveIntegerField()),
                (
                    "feedback_type",
                    models.CharField(
                        choices=[
                            ("helpful", "Helpful"),
                            ("not_helpful", "Not Helpful"),
                            ("implemented", "Implemented"),
                            ("irrelevant", "Irrelevant"),
                        ],
                        max_length=20,
                    ),
                ),
                (
                    "rating",
                    models.IntegerField(
                        blank=True,
                        null=True,
                        validators=[
                            django.core.validators.MinValueValidator(1),
                            django.core.validators.MaxValueValidator(5),
                        ],
                    ),
                ),
                ("comments", models.TextField(blank=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "core_recommendation_feedback",
            },
        ),
        migrations.CreateModel(
            name="RecommendationImplementation",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("implementation_date", models.DateTimeField(auto_now_add=True)),
                ("implementation_notes", models.TextField(blank=True)),
                ("implementation_method", models.CharField(blank=True, max_length=100)),
                ("before_metrics", models.JSONField(default=dict)),
                ("after_metrics", models.JSONField(default=dict)),
                ("success_metrics", models.JSONField(default=dict)),
                ("is_successful", models.BooleanField(null=True)),
                (
                    "effectiveness_score",
                    models.FloatField(
                        null=True,
                        validators=[
                            django.core.validators.MinValueValidator(0.0),
                            django.core.validators.MaxValueValidator(1.0),
                        ],
                    ),
                ),
            ],
            options={
                "db_table": "core_recommendation_implementation",
                "ordering": ["-implementation_date"],
            },
        ),
        migrations.CreateModel(
            name="RefreshTokenBlacklist",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True,
                        help_text="When this record was created",
                        verbose_name="Created at",
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(
                        auto_now=True,
                        help_text="When this record was last modified",
                        verbose_name="Updated at",
                    ),
                ),
                (
                    "ctzoffset",
                    models.IntegerField(
                        default=-1,
                        help_text="User's timezone offset in minutes",
                        verbose_name="Timezone offset",
                    ),
                ),
                (
                    "token_jti",
                    models.CharField(
                        db_index=True,
                        help_text="JWT token identifier (jti claim)",
                        max_length=255,
                        unique=True,
                    ),
                ),
                (
                    "blacklisted_at",
                    models.DateTimeField(
                        auto_now_add=True,
                        db_index=True,
                        help_text="Timestamp when token was blacklisted",
                    ),
                ),
                (
                    "reason",
                    models.CharField(
                        choices=[
                            ("rotated", "Token Rotated"),
                            ("logout", "User Logout"),
                            ("revoked", "Admin Revoked"),
                            ("expired", "Token Expired"),
                            ("security", "Security Event"),
                        ],
                        db_index=True,
                        default="rotated",
                        help_text="Reason for blacklisting",
                        max_length=50,
                    ),
                ),
                (
                    "metadata",
                    models.JSONField(
                        blank=True,
                        default=dict,
                        help_text="Additional metadata (IP address, user agent, etc.)",
                    ),
                ),
            ],
            options={
                "verbose_name": "Refresh Token Blacklist Entry",
                "verbose_name_plural": "Refresh Token Blacklist Entries",
                "db_table": "core_refresh_token_blacklist",
                "ordering": ["-blacklisted_at"],
            },
        ),
        migrations.CreateModel(
            name="Runbook",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "cdtz",
                    models.DateTimeField(
                        default=apps.peoples.models.base_model.now,
                        help_text="When this record was created",
                        verbose_name="Created date",
                    ),
                ),
                (
                    "mdtz",
                    models.DateTimeField(
                        default=apps.peoples.models.base_model.now,
                        help_text="When this record was last modified",
                        verbose_name="Modified date",
                    ),
                ),
                (
                    "ctzoffset",
                    models.IntegerField(
                        default=-1,
                        help_text="User's timezone offset in minutes",
                        verbose_name="Timezone offset",
                    ),
                ),
                (
                    "name",
                    models.CharField(
                        help_text="What to call this action (e.g., 'Camera Offline Response')",
                        max_length=200,
                        verbose_name="Quick Action Name",
                    ),
                ),
                (
                    "description",
                    models.TextField(
                        help_text="Plain language description of when and how to use this",
                        verbose_name="What This Action Does",
                    ),
                ),
                (
                    "trigger_types",
                    models.JSONField(
                        default=list,
                        encoder=django.core.serializers.json.DjangoJSONEncoder,
                        help_text="Which incident/ticket types activate this action",
                        verbose_name="Trigger Types",
                    ),
                ),
                (
                    "automated_steps",
                    models.JSONField(
                        default=list,
                        encoder=django.core.serializers.json.DjangoJSONEncoder,
                        help_text="System actions (e.g., assign to team, send notification). Format: [{action_label, action_type, config}, ...]",
                        verbose_name="Automated Steps",
                    ),
                ),
                (
                    "manual_steps",
                    models.JSONField(
                        default=list,
                        encoder=django.core.serializers.json.DjangoJSONEncoder,
                        help_text="Instructions for humans (e.g., 'Check camera power'). Format: [{instruction, needs_photo, needs_signature}, ...]",
                        verbose_name="Manual Steps",
                    ),
                ),
                (
                    "is_active",
                    models.BooleanField(
                        db_index=True,
                        default=True,
                        help_text="Whether this quick action is currently available",
                        verbose_name="Is Active",
                    ),
                ),
                (
                    "usage_count",
                    models.PositiveIntegerField(
                        default=0,
                        help_text="How many times this action has been executed",
                        verbose_name="Times Used",
                    ),
                ),
                (
                    "last_used_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="When this action was last executed",
                        null=True,
                        verbose_name="Last Used At",
                    ),
                ),
            ],
            options={
                "verbose_name": "Quick Action Template",
                "verbose_name_plural": "Quick Action Templates",
                "db_table": "admin_runbook",
                "ordering": ["-usage_count", "name"],
                "abstract": False,
            },
        ),
        migrations.CreateModel(
            name="RunbookExecution",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "cdtz",
                    models.DateTimeField(
                        default=apps.peoples.models.base_model.now,
                        help_text="When this record was created",
                        verbose_name="Created date",
                    ),
                ),
                (
                    "mdtz",
                    models.DateTimeField(
                        default=apps.peoples.models.base_model.now,
                        help_text="When this record was last modified",
                        verbose_name="Modified date",
                    ),
                ),
                (
                    "ctzoffset",
                    models.IntegerField(
                        default=-1,
                        help_text="User's timezone offset in minutes",
                        verbose_name="Timezone offset",
                    ),
                ),
                (
                    "target_model",
                    models.CharField(
                        help_text="Type of item (Incident/Ticket/WorkOrder)",
                        max_length=100,
                        verbose_name="Target Type",
                    ),
                ),
                (
                    "target_id",
                    models.PositiveIntegerField(
                        help_text="ID of the incident/ticket this was executed for",
                        verbose_name="Target ID",
                    ),
                ),
                (
                    "evidence_attachments",
                    models.JSONField(
                        default=list,
                        encoder=django.core.serializers.json.DjangoJSONEncoder,
                        help_text="Photos, notes, signatures from manual steps",
                        verbose_name="Evidence",
                    ),
                ),
                (
                    "completed_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="When all steps were finished",
                        null=True,
                        verbose_name="Completed At",
                    ),
                ),
            ],
            options={
                "verbose_name": "Quick Action Execution",
                "verbose_name_plural": "Quick Action Executions",
                "db_table": "admin_runbook_execution",
                "ordering": ["-cdtz"],
                "abstract": False,
            },
        ),
        migrations.CreateModel(
            name="SagaExecutionLog",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "saga_id",
                    models.CharField(db_index=True, max_length=100, unique=True),
                ),
                ("saga_name", models.CharField(max_length=255)),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("pending", "Pending"),
                            ("executing", "Executing"),
                            ("committed", "Committed"),
                            ("failed", "Failed"),
                            ("compensating", "Compensating"),
                            ("compensated", "Compensated"),
                        ],
                        db_index=True,
                        default="pending",
                        max_length=20,
                    ),
                ),
                ("total_steps", models.IntegerField(default=0)),
                ("executed_steps", models.IntegerField(default=0)),
                ("compensated_steps", models.IntegerField(default=0)),
                ("started_at", models.DateTimeField(default=django.utils.timezone.now)),
                ("completed_at", models.DateTimeField(blank=True, null=True)),
                ("duration_ms", models.FloatField(blank=True, null=True)),
                ("error_message", models.TextField(blank=True, null=True)),
                ("execution_details", models.JSONField(default=dict)),
                ("user_id", models.IntegerField(blank=True, null=True)),
            ],
            options={
                "db_table": "saga_execution_log",
                "ordering": ["-started_at"],
            },
        ),
        migrations.CreateModel(
            name="SagaState",
            fields=[
                (
                    "saga_id",
                    models.CharField(
                        help_text="Unique saga identifier (format: operation_YYYYMMDD_HHMMSS)",
                        max_length=255,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("created", "Created"),
                            ("in_progress", "In Progress"),
                            ("committed", "Committed"),
                            ("rolled_back", "Rolled Back"),
                            ("failed", "Failed"),
                        ],
                        default="created",
                        help_text="Current saga status",
                        max_length=20,
                    ),
                ),
                (
                    "operation_type",
                    models.CharField(
                        help_text="Type of operation (e.g., 'guard_tour', 'schedule_creation')",
                        max_length=100,
                    ),
                ),
                (
                    "steps_completed",
                    models.IntegerField(
                        default=0, help_text="Number of steps successfully completed"
                    ),
                ),
                (
                    "total_steps",
                    models.IntegerField(
                        default=0, help_text="Total number of steps in saga"
                    ),
                ),
                (
                    "context_data",
                    models.JSONField(
                        default=dict,
                        help_text="Saga context: step results, created objects, rollback data",
                    ),
                ),
                (
                    "error_message",
                    models.TextField(
                        blank=True, help_text="Error message if saga failed"
                    ),
                ),
                (
                    "error_step",
                    models.CharField(
                        blank=True,
                        help_text="Step where error occurred",
                        max_length=100,
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, help_text="When saga was created"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(
                        auto_now=True, help_text="Last update timestamp"
                    ),
                ),
                (
                    "committed_at",
                    models.DateTimeField(
                        blank=True, help_text="When saga was committed", null=True
                    ),
                ),
                (
                    "rolled_back_at",
                    models.DateTimeField(
                        blank=True, help_text="When saga was rolled back", null=True
                    ),
                ),
            ],
            options={
                "verbose_name": "Saga State",
                "verbose_name_plural": "Saga States",
                "db_table": "saga_state",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="ServiceAvailability",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "service_name",
                    models.CharField(db_index=True, max_length=100, unique=True),
                ),
                ("total_checks", models.IntegerField(default=0)),
                ("successful_checks", models.IntegerField(default=0)),
                ("failed_checks", models.IntegerField(default=0)),
                ("degraded_checks", models.IntegerField(default=0)),
                ("last_check_at", models.DateTimeField(blank=True, null=True)),
                ("last_success_at", models.DateTimeField(blank=True, null=True)),
                ("last_failure_at", models.DateTimeField(blank=True, null=True)),
                (
                    "uptime_percentage",
                    models.FloatField(
                        default=100.0,
                        validators=[
                            django.core.validators.MinValueValidator(0),
                            django.core.validators.MaxValueValidator(100),
                        ],
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "verbose_name": "Service Availability",
                "verbose_name_plural": "Service Availabilities",
                "db_table": "core_service_availability",
                "ordering": ["-uptime_percentage"],
            },
        ),
        migrations.CreateModel(
            name="SessionForensics",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "session_key",
                    models.CharField(
                        db_index=True,
                        help_text="Django session key (hashed for security)",
                        max_length=40,
                    ),
                ),
                (
                    "event_type",
                    models.CharField(
                        choices=[
                            ("created", "Session Created"),
                            ("authenticated", "User Authenticated"),
                            ("rotated", "Session Rotated"),
                            ("activity_timeout", "Activity Timeout"),
                            ("privilege_change", "Privilege Change Detected"),
                            ("ip_change", "IP Address Changed"),
                            ("user_agent_change", "User Agent Changed"),
                            ("concurrent_limit", "Concurrent Session Limit"),
                            ("manual_logout", "Manual Logout"),
                            ("forced_logout", "Forced Logout"),
                            ("expired", "Session Expired"),
                        ],
                        db_index=True,
                        help_text="Type of session event",
                        max_length=30,
                    ),
                ),
                (
                    "timestamp",
                    models.DateTimeField(
                        db_index=True,
                        default=django.utils.timezone.now,
                        help_text="When the event occurred",
                    ),
                ),
                (
                    "ip_address",
                    models.GenericIPAddressField(
                        blank=True, help_text="IP address at time of event", null=True
                    ),
                ),
                (
                    "user_agent",
                    models.TextField(
                        blank=True, help_text="User agent string at time of event"
                    ),
                ),
                (
                    "geolocation",
                    models.JSONField(
                        blank=True,
                        help_text="Approximate geolocation data (country, city, etc.)",
                        null=True,
                    ),
                ),
                (
                    "event_metadata",
                    models.JSONField(
                        blank=True,
                        default=dict,
                        help_text="Additional event-specific metadata",
                    ),
                ),
                (
                    "correlation_id",
                    models.CharField(
                        blank=True,
                        db_index=True,
                        help_text="Correlation ID for request tracking",
                        max_length=100,
                    ),
                ),
                (
                    "severity",
                    models.CharField(
                        choices=[
                            ("info", "Informational"),
                            ("low", "Low Risk"),
                            ("medium", "Medium Risk"),
                            ("high", "High Risk"),
                            ("critical", "Critical Security Event"),
                        ],
                        default="info",
                        help_text="Security severity of the event",
                        max_length=20,
                    ),
                ),
                (
                    "is_suspicious",
                    models.BooleanField(
                        db_index=True,
                        default=False,
                        help_text="Flagged as suspicious by automated analysis",
                    ),
                ),
                (
                    "notes",
                    models.TextField(
                        blank=True, help_text="Additional notes or analysis"
                    ),
                ),
            ],
            options={
                "verbose_name": "Session Forensic Record",
                "verbose_name_plural": "Session Forensic Records",
                "db_table": "session_forensics",
                "ordering": ["-timestamp"],
            },
        ),
        migrations.CreateModel(
            name="SLAPrediction",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "cdtz",
                    models.DateTimeField(
                        default=apps.peoples.models.base_model.now,
                        help_text="When this record was created",
                        verbose_name="Created date",
                    ),
                ),
                (
                    "mdtz",
                    models.DateTimeField(
                        default=apps.peoples.models.base_model.now,
                        help_text="When this record was last modified",
                        verbose_name="Modified date",
                    ),
                ),
                (
                    "ctzoffset",
                    models.IntegerField(
                        default=-1,
                        help_text="User's timezone offset in minutes",
                        verbose_name="Timezone offset",
                    ),
                ),
                (
                    "item_type",
                    models.CharField(
                        help_text="Type of item (Ticket/Incident/WorkOrder)",
                        max_length=100,
                        verbose_name="Item Type",
                    ),
                ),
                (
                    "item_id",
                    models.PositiveIntegerField(
                        help_text="ID of the at-risk item", verbose_name="Item ID"
                    ),
                ),
                (
                    "predicted_breach_time",
                    models.DateTimeField(
                        help_text="When we think the SLA will be missed",
                        verbose_name="Predicted Breach Time",
                    ),
                ),
                (
                    "confidence_level",
                    models.IntegerField(
                        help_text="How confident we are (0-100%)",
                        validators=[
                            django.core.validators.MinValueValidator(0),
                            django.core.validators.MaxValueValidator(100),
                        ],
                        verbose_name="Confidence Level",
                    ),
                ),
                (
                    "risk_level",
                    models.CharField(
                        choices=[
                            ("LOW", "Low Risk (Monitor)"),
                            ("MEDIUM", "Medium Risk (Watch Closely)"),
                            ("HIGH", "High Risk (Take Action)"),
                            ("CRITICAL", "Critical (Immediate Action Required)"),
                        ],
                        db_index=True,
                        help_text="Overall risk assessment",
                        max_length=20,
                        verbose_name="Risk Level",
                    ),
                ),
                (
                    "risk_factors",
                    models.JSONField(
                        default=list,
                        encoder=django.core.serializers.json.DjangoJSONEncoder,
                        help_text="Human-readable reasons. Format: [{reason: 'Assignee has 15 other tasks', impact: 'High'}, ...]",
                        verbose_name="Why It's At Risk",
                    ),
                ),
                (
                    "suggested_actions",
                    models.JSONField(
                        default=list,
                        encoder=django.core.serializers.json.DjangoJSONEncoder,
                        help_text="Actionable suggestions. Format: [{action: 'Reassign to someone available', suggested_person_id: 123}, ...]",
                        verbose_name="What to Do",
                    ),
                ),
                (
                    "calculated_at",
                    models.DateTimeField(
                        auto_now_add=True,
                        help_text="When this prediction was made",
                        verbose_name="Calculated At",
                    ),
                ),
                (
                    "is_acknowledged",
                    models.BooleanField(
                        db_index=True,
                        default=False,
                        help_text="Has someone seen and acted on this alert?",
                        verbose_name="Acknowledged",
                    ),
                ),
                (
                    "acknowledged_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="When this alert was acknowledged",
                        null=True,
                        verbose_name="Acknowledged At",
                    ),
                ),
            ],
            options={
                "verbose_name": "Priority Alert",
                "verbose_name_plural": "Priority Alerts",
                "db_table": "admin_sla_prediction",
                "ordering": ["-risk_level", "predicted_breach_time"],
                "abstract": False,
            },
        ),
        migrations.CreateModel(
            name="SlowQueryAlert",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "alert_time",
                    models.DateTimeField(
                        db_index=True,
                        default=django.utils.timezone.now,
                        help_text="When this alert was created",
                    ),
                ),
                (
                    "query_hash",
                    models.BigIntegerField(
                        db_index=True,
                        help_text="PostgreSQL query hash that triggered the alert",
                    ),
                ),
                (
                    "severity",
                    models.CharField(
                        choices=[
                            ("info", "Informational"),
                            ("warning", "Warning"),
                            ("critical", "Critical"),
                            ("emergency", "Emergency"),
                        ],
                        db_index=True,
                        default="warning",
                        help_text="Alert severity level",
                        max_length=20,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("new", "New"),
                            ("acknowledged", "Acknowledged"),
                            ("investigating", "Investigating"),
                            ("resolved", "Resolved"),
                            ("false_positive", "False Positive"),
                        ],
                        db_index=True,
                        default="new",
                        help_text="Current alert status",
                        max_length=20,
                    ),
                ),
                (
                    "alert_type",
                    models.CharField(
                        db_index=True,
                        help_text="Type of performance issue detected",
                        max_length=50,
                    ),
                ),
                (
                    "execution_time",
                    models.DecimalField(
                        decimal_places=2,
                        help_text="Execution time that triggered alert (ms)",
                        max_digits=10,
                    ),
                ),
                (
                    "threshold_exceeded",
                    models.DecimalField(
                        decimal_places=2,
                        help_text="Threshold value that was exceeded",
                        max_digits=10,
                    ),
                ),
                (
                    "query_text",
                    models.TextField(help_text="Query that triggered the alert"),
                ),
                (
                    "acknowledged_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="When this alert was acknowledged",
                        null=True,
                    ),
                ),
                (
                    "resolved_at",
                    models.DateTimeField(
                        blank=True, help_text="When this alert was resolved", null=True
                    ),
                ),
                (
                    "notes",
                    models.TextField(
                        blank=True,
                        help_text="Investigation notes and resolution details",
                    ),
                ),
            ],
            options={
                "verbose_name": "Slow Query Alert",
                "verbose_name_plural": "Slow Query Alerts",
                "db_table": "slow_query_alerts",
                "ordering": ["-alert_time"],
            },
        ),
        migrations.CreateModel(
            name="StateTransitionAudit",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "uuid",
                    models.UUIDField(
                        db_index=True, default=uuid.uuid4, editable=False, unique=True
                    ),
                ),
                (
                    "entity_type",
                    models.CharField(
                        db_index=True,
                        help_text="State machine class name (e.g., 'TaskStateMachine')",
                        max_length=100,
                    ),
                ),
                (
                    "entity_id",
                    models.CharField(
                        db_index=True,
                        help_text="Primary key of the entity being transitioned",
                        max_length=100,
                    ),
                ),
                (
                    "from_state",
                    models.CharField(help_text="Previous state", max_length=50),
                ),
                (
                    "to_state",
                    models.CharField(
                        db_index=True,
                        help_text="New state after transition",
                        max_length=50,
                    ),
                ),
                (
                    "reason",
                    models.CharField(
                        choices=[
                            ("user_action", "User Action"),
                            ("system_auto", "System Automation"),
                            ("scheduled", "Scheduled Task"),
                            ("api_call", "API Call"),
                            ("webhook", "Webhook Trigger"),
                            ("escalation", "Escalation Rule"),
                            ("timeout", "Timeout/Expiry"),
                        ],
                        default="user_action",
                        max_length=50,
                    ),
                ),
                (
                    "comments",
                    models.TextField(
                        blank=True,
                        help_text="Human-readable description of why transition occurred",
                    ),
                ),
                (
                    "metadata",
                    models.JSONField(
                        blank=True,
                        default=dict,
                        help_text="Additional context (sanitized, no PII)",
                    ),
                ),
                (
                    "timestamp",
                    models.DateTimeField(
                        db_index=True,
                        default=django.utils.timezone.now,
                        help_text="When transition occurred (UTC)",
                    ),
                ),
                (
                    "success",
                    models.BooleanField(
                        default=True, help_text="Whether transition succeeded"
                    ),
                ),
                (
                    "error_message",
                    models.TextField(
                        blank=True, help_text="Error details if transition failed"
                    ),
                ),
                (
                    "execution_time_ms",
                    models.IntegerField(
                        blank=True,
                        help_text="Total execution time in milliseconds",
                        null=True,
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                (
                    "lock_acquisition_time_ms",
                    models.IntegerField(
                        blank=True,
                        help_text="Time spent acquiring distributed lock (ms)",
                        null=True,
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
                (
                    "lock_key",
                    models.CharField(
                        blank=True,
                        help_text="Distributed lock key used",
                        max_length=255,
                    ),
                ),
                (
                    "isolation_level",
                    models.CharField(
                        blank=True,
                        help_text="Database isolation level (e.g., 'SERIALIZABLE')",
                        max_length=50,
                    ),
                ),
                (
                    "retry_attempt",
                    models.IntegerField(
                        default=0,
                        help_text="Which retry attempt succeeded (0 = first try)",
                        validators=[django.core.validators.MinValueValidator(0)],
                    ),
                ),
            ],
            options={
                "verbose_name": "State Transition Audit",
                "verbose_name_plural": "State Transition Audits",
                "db_table": "core_state_transition_audit",
                "ordering": ["-timestamp"],
            },
        ),
        migrations.CreateModel(
            name="SyncAnalyticsSnapshot",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "timestamp",
                    models.DateTimeField(
                        auto_now_add=True, help_text="When this snapshot was created"
                    ),
                ),
                (
                    "total_sync_requests",
                    models.IntegerField(
                        default=0, help_text="Total sync API calls during period"
                    ),
                ),
                (
                    "successful_syncs",
                    models.IntegerField(
                        default=0, help_text="Successfully completed syncs"
                    ),
                ),
                (
                    "failed_syncs",
                    models.IntegerField(default=0, help_text="Failed sync attempts"),
                ),
                (
                    "avg_sync_duration_ms",
                    models.FloatField(
                        default=0.0, help_text="Average sync duration in milliseconds"
                    ),
                ),
                (
                    "p95_sync_duration_ms",
                    models.FloatField(
                        default=0.0, help_text="95th percentile sync duration"
                    ),
                ),
                (
                    "avg_items_per_sync",
                    models.FloatField(
                        default=0.0, help_text="Average items synced per request"
                    ),
                ),
                (
                    "total_conflicts",
                    models.IntegerField(
                        default=0, help_text="Total conflicts detected"
                    ),
                ),
                (
                    "auto_resolved_conflicts",
                    models.IntegerField(
                        default=0, help_text="Conflicts resolved automatically"
                    ),
                ),
                (
                    "manual_conflicts",
                    models.IntegerField(
                        default=0, help_text="Conflicts requiring manual resolution"
                    ),
                ),
                (
                    "conflict_rate_pct",
                    models.FloatField(
                        default=0.0, help_text="Conflict rate as percentage"
                    ),
                ),
                (
                    "total_bytes_synced",
                    models.BigIntegerField(
                        default=0, help_text="Total payload size in bytes"
                    ),
                ),
                (
                    "bytes_saved_via_delta",
                    models.BigIntegerField(
                        default=0, help_text="Bytes saved through delta sync"
                    ),
                ),
                (
                    "bandwidth_efficiency_pct",
                    models.FloatField(
                        default=0.0, help_text="Bandwidth efficiency percentage"
                    ),
                ),
                (
                    "unique_devices",
                    models.IntegerField(
                        default=0, help_text="Unique device IDs during period"
                    ),
                ),
                (
                    "unique_users",
                    models.IntegerField(
                        default=0, help_text="Unique users during period"
                    ),
                ),
                (
                    "domain_breakdown",
                    models.JSONField(
                        blank=True,
                        default=dict,
                        help_text="Per-domain metrics breakdown",
                    ),
                ),
            ],
            options={
                "verbose_name": "Sync Analytics Snapshot",
                "verbose_name_plural": "Sync Analytics Snapshots",
                "db_table": "sync_analytics_snapshot",
                "ordering": ["-timestamp"],
            },
        ),
        migrations.CreateModel(
            name="SyncDeviceHealth",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "device_id",
                    models.CharField(
                        help_text="Unique device identifier", max_length=255
                    ),
                ),
                (
                    "last_sync_at",
                    models.DateTimeField(help_text="Timestamp of last successful sync"),
                ),
                (
                    "total_syncs",
                    models.IntegerField(
                        default=0, help_text="Lifetime sync count for device"
                    ),
                ),
                (
                    "failed_syncs_count",
                    models.IntegerField(
                        default=0, help_text="Lifetime failed sync count"
                    ),
                ),
                (
                    "avg_sync_duration_ms",
                    models.FloatField(
                        default=0.0, help_text="Average sync duration for this device"
                    ),
                ),
                (
                    "conflicts_encountered",
                    models.IntegerField(
                        default=0, help_text="Total conflicts encountered by device"
                    ),
                ),
                (
                    "health_score",
                    models.FloatField(
                        default=100.0, help_text="Sync health score (0-100)"
                    ),
                ),
                (
                    "network_type",
                    models.CharField(
                        choices=[
                            ("wifi", "WiFi"),
                            ("4g", "4G"),
                            ("3g", "3G"),
                            ("2g", "2G"),
                            ("unknown", "Unknown"),
                        ],
                        default="unknown",
                        help_text="Last known network type",
                        max_length=20,
                    ),
                ),
                (
                    "app_version",
                    models.CharField(
                        blank=True, help_text="Mobile app version", max_length=50
                    ),
                ),
                (
                    "os_version",
                    models.CharField(
                        blank=True, help_text="Device OS version", max_length=50
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "verbose_name": "Device Sync Health",
                "verbose_name_plural": "Device Sync Health Records",
                "db_table": "sync_device_health",
                "ordering": ["-last_sync_at"],
            },
        ),
        migrations.CreateModel(
            name="SyncIdempotencyRecord",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "idempotency_key",
                    models.CharField(
                        db_index=True,
                        help_text="SHA256 hash of request for idempotency",
                        max_length=64,
                        unique=True,
                    ),
                ),
                (
                    "scope",
                    models.CharField(
                        choices=[("batch", "Batch Level"), ("item", "Item Level")],
                        default="batch",
                        help_text="Scope of idempotency (batch or item)",
                        max_length=10,
                    ),
                ),
                (
                    "request_hash",
                    models.CharField(
                        help_text="Hash of full request payload for verification",
                        max_length=64,
                    ),
                ),
                (
                    "response_data",
                    models.JSONField(
                        help_text="Cached response to return on duplicate request"
                    ),
                ),
                (
                    "user_id",
                    models.CharField(
                        blank=True,
                        help_text="User who initiated the sync operation",
                        max_length=100,
                        null=True,
                    ),
                ),
                (
                    "device_id",
                    models.CharField(
                        blank=True,
                        help_text="Device identifier for tracking",
                        max_length=100,
                        null=True,
                    ),
                ),
                (
                    "endpoint",
                    models.CharField(
                        help_text="Sync endpoint that was called", max_length=255
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True,
                        help_text="When this idempotency record was created",
                    ),
                ),
                (
                    "expires_at",
                    models.DateTimeField(
                        db_index=True,
                        help_text="When this record expires (24-hour TTL)",
                    ),
                ),
                (
                    "hit_count",
                    models.IntegerField(
                        default=0,
                        help_text="Number of times this idempotency key was used",
                    ),
                ),
                (
                    "last_hit_at",
                    models.DateTimeField(
                        blank=True, help_text="Last time this key was used", null=True
                    ),
                ),
            ],
            options={
                "verbose_name": "Sync Idempotency Record",
                "verbose_name_plural": "Sync Idempotency Records",
                "db_table": "sync_idempotency_record",
            },
        ),
        migrations.CreateModel(
            name="TaskFailureRecord",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "task_id",
                    models.CharField(
                        db_index=True, help_text="Celery task ID", max_length=255
                    ),
                ),
                (
                    "task_name",
                    models.CharField(
                        db_index=True,
                        help_text="Task name (e.g., 'auto_close_jobs')",
                        max_length=255,
                    ),
                ),
                (
                    "correlation_id",
                    models.CharField(
                        blank=True,
                        db_index=True,
                        help_text="Request correlation ID for tracing",
                        max_length=100,
                        null=True,
                    ),
                ),
                (
                    "task_args",
                    models.JSONField(
                        default=list, help_text="Task positional arguments"
                    ),
                ),
                (
                    "task_kwargs",
                    models.JSONField(default=dict, help_text="Task keyword arguments"),
                ),
                (
                    "failure_type",
                    models.CharField(
                        choices=[
                            ("TRANSIENT", "Transient Failure"),
                            ("PERMANENT", "Permanent Failure"),
                            ("CONFIGURATION", "Configuration Error"),
                            ("EXTERNAL", "External Service Failure"),
                            ("UNKNOWN", "Unknown Failure"),
                        ],
                        db_index=True,
                        default="UNKNOWN",
                        help_text="Failure category for automated handling",
                        max_length=20,
                    ),
                ),
                (
                    "exception_type",
                    models.CharField(
                        help_text="Exception class name (e.g., 'DatabaseError')",
                        max_length=255,
                    ),
                ),
                (
                    "exception_message",
                    models.TextField(
                        help_text="Exception message (sanitized, no sensitive data)"
                    ),
                ),
                (
                    "traceback",
                    models.TextField(help_text="Exception traceback for debugging"),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("PENDING", "Pending Retry"),
                            ("RETRYING", "Retrying"),
                            ("RESOLVED", "Resolved"),
                            ("ABANDONED", "Abandoned"),
                        ],
                        db_index=True,
                        default="PENDING",
                        max_length=20,
                    ),
                ),
                (
                    "retry_count",
                    models.IntegerField(
                        default=0, help_text="Number of DLQ retry attempts"
                    ),
                ),
                (
                    "max_retries",
                    models.IntegerField(
                        default=3,
                        help_text="Maximum DLQ retry attempts before abandonment",
                    ),
                ),
                (
                    "next_retry_at",
                    models.DateTimeField(
                        blank=True,
                        db_index=True,
                        help_text="Next automatic retry timestamp",
                        null=True,
                    ),
                ),
                (
                    "last_retry_at",
                    models.DateTimeField(
                        blank=True, help_text="Last retry attempt timestamp", null=True
                    ),
                ),
                (
                    "first_failed_at",
                    models.DateTimeField(
                        auto_now_add=True, help_text="Initial failure timestamp"
                    ),
                ),
                (
                    "resolved_at",
                    models.DateTimeField(
                        blank=True, help_text="Resolution timestamp", null=True
                    ),
                ),
                (
                    "abandoned_at",
                    models.DateTimeField(
                        blank=True, help_text="Abandonment timestamp", null=True
                    ),
                ),
                (
                    "worker_hostname",
                    models.CharField(
                        blank=True,
                        help_text="Worker that processed task",
                        max_length=255,
                        null=True,
                    ),
                ),
                (
                    "queue_name",
                    models.CharField(
                        blank=True,
                        help_text="Queue name (critical, high_priority, etc.)",
                        max_length=100,
                        null=True,
                    ),
                ),
                (
                    "remediation_notes",
                    models.TextField(
                        blank=True, help_text="Manual notes from admin review"
                    ),
                ),
            ],
            options={
                "verbose_name": "Task Failure Record",
                "verbose_name_plural": "Task Failure Records",
                "db_table": "core_task_failure_record",
                "ordering": ["-first_failed_at"],
            },
        ),
        migrations.CreateModel(
            name="TenantConflictPolicy",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "domain",
                    models.CharField(
                        choices=[
                            ("journal", "Journal Entries"),
                            ("attendance", "Attendance Records"),
                            ("task", "Tasks"),
                            ("ticket", "Help Desk Tickets"),
                            ("work_order", "Work Orders"),
                        ],
                        help_text="Data domain this policy applies to",
                        max_length=50,
                    ),
                ),
                (
                    "resolution_policy",
                    models.CharField(
                        choices=[
                            (
                                "client_wins",
                                "Client Wins - User device is authoritative",
                            ),
                            (
                                "server_wins",
                                "Server Wins - Organization is authoritative",
                            ),
                            ("most_recent_wins", "Most Recent Wins - Timestamp-based"),
                            (
                                "preserve_escalation",
                                "Preserve Escalation - Complex merge",
                            ),
                            ("manual", "Manual Resolution - Requires human review"),
                        ],
                        default="manual",
                        help_text="Resolution strategy for conflicts",
                        max_length=50,
                    ),
                ),
                (
                    "auto_resolve",
                    models.BooleanField(
                        default=True,
                        help_text="Automatically resolve conflicts using this policy",
                    ),
                ),
                (
                    "notify_on_conflict",
                    models.BooleanField(
                        default=False,
                        help_text="Send notification when conflicts occur",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "verbose_name": "Tenant Conflict Policy",
                "verbose_name_plural": "Tenant Conflict Policies",
                "db_table": "sync_tenant_conflict_policy",
                "ordering": ["tenant", "domain"],
            },
        ),
        migrations.CreateModel(
            name="TransactionFailureLog",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("operation_name", models.CharField(db_index=True, max_length=255)),
                (
                    "view_name",
                    models.CharField(
                        blank=True, db_index=True, max_length=255, null=True
                    ),
                ),
                ("error_type", models.CharField(db_index=True, max_length=100)),
                ("error_message", models.TextField()),
                ("error_traceback", models.TextField(blank=True, null=True)),
                (
                    "correlation_id",
                    models.CharField(
                        blank=True, db_index=True, max_length=36, null=True
                    ),
                ),
                ("user_id", models.IntegerField(blank=True, db_index=True, null=True)),
                (
                    "request_path",
                    models.CharField(blank=True, max_length=500, null=True),
                ),
                (
                    "request_method",
                    models.CharField(blank=True, max_length=10, null=True),
                ),
                ("database_alias", models.CharField(default="default", max_length=50)),
                (
                    "transaction_id",
                    models.CharField(blank=True, max_length=100, null=True),
                ),
                (
                    "occurred_at",
                    models.DateTimeField(
                        db_index=True, default=django.utils.timezone.now
                    ),
                ),
                ("resolved_at", models.DateTimeField(blank=True, null=True)),
                ("is_resolved", models.BooleanField(db_index=True, default=False)),
                ("resolution_notes", models.TextField(blank=True, null=True)),
                ("additional_context", models.JSONField(blank=True, default=dict)),
            ],
            options={
                "db_table": "transaction_failure_log",
                "ordering": ["-occurred_at"],
            },
        ),
        migrations.CreateModel(
            name="TransactionHealthCheck",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "check_timestamp",
                    models.DateTimeField(
                        db_index=True, default=django.utils.timezone.now
                    ),
                ),
                ("total_transactions_last_hour", models.IntegerField(default=0)),
                ("failed_transactions_last_hour", models.IntegerField(default=0)),
                (
                    "avg_transaction_duration_ms",
                    models.FloatField(blank=True, null=True),
                ),
                ("deadlock_count_last_hour", models.IntegerField(default=0)),
                ("timeout_count_last_hour", models.IntegerField(default=0)),
                (
                    "health_status",
                    models.CharField(
                        choices=[
                            ("healthy", "Healthy"),
                            ("degraded", "Degraded"),
                            ("critical", "Critical"),
                        ],
                        default="healthy",
                        max_length=20,
                    ),
                ),
                ("alerts_triggered", models.JSONField(default=list)),
                ("recommendations", models.JSONField(default=list)),
            ],
            options={
                "db_table": "transaction_health_check",
                "ordering": ["-check_timestamp"],
            },
        ),
        migrations.CreateModel(
            name="TransactionMetrics",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("operation_name", models.CharField(db_index=True, max_length=255)),
                (
                    "metric_date",
                    models.DateField(db_index=True, default=django.utils.timezone.now),
                ),
                ("hour_of_day", models.IntegerField(blank=True, null=True)),
                ("total_attempts", models.IntegerField(default=0)),
                ("successful_commits", models.IntegerField(default=0)),
                ("failed_commits", models.IntegerField(default=0)),
                ("rollbacks", models.IntegerField(default=0)),
                ("avg_duration_ms", models.FloatField(blank=True, null=True)),
                ("max_duration_ms", models.FloatField(blank=True, null=True)),
                ("min_duration_ms", models.FloatField(blank=True, null=True)),
                ("integrity_errors", models.IntegerField(default=0)),
                ("validation_errors", models.IntegerField(default=0)),
                ("deadlocks", models.IntegerField(default=0)),
                ("timeouts", models.IntegerField(default=0)),
                ("last_updated", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "transaction_metrics",
                "ordering": ["-metric_date", "-hour_of_day"],
            },
        ),
        migrations.CreateModel(
            name="UploadSession",
            fields=[
                (
                    "upload_id",
                    models.UUIDField(
                        default=uuid.uuid4,
                        editable=False,
                        help_text="Unique identifier for this upload session",
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "filename",
                    models.CharField(
                        help_text="Original filename (sanitized)", max_length=255
                    ),
                ),
                (
                    "total_size",
                    models.BigIntegerField(help_text="Total file size in bytes"),
                ),
                (
                    "chunk_size",
                    models.IntegerField(
                        default=1048576,
                        help_text="Size of each chunk in bytes (default 1MB)",
                    ),
                ),
                (
                    "mime_type",
                    models.CharField(help_text="MIME type of the file", max_length=100),
                ),
                (
                    "chunks_received",
                    models.JSONField(
                        default=list,
                        help_text="List of chunk indices received (e.g., [0,1,2,5,7])",
                    ),
                ),
                (
                    "total_chunks",
                    models.IntegerField(help_text="Total number of chunks expected"),
                ),
                (
                    "file_hash",
                    models.CharField(
                        help_text="SHA-256 hash for final file validation",
                        max_length=64,
                    ),
                ),
                (
                    "temp_directory",
                    models.CharField(
                        help_text="Temporary directory path for storing chunks",
                        max_length=500,
                    ),
                ),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("active", "Active - Accepting Chunks"),
                            ("assembling", "Assembling - Merging Chunks"),
                            ("completed", "Completed Successfully"),
                            ("failed", "Failed - Error Occurred"),
                            ("cancelled", "Cancelled by User"),
                            ("expired", "Expired - TTL Exceeded"),
                        ],
                        db_index=True,
                        default="active",
                        help_text="Current status of the upload session",
                        max_length=20,
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True,
                        db_index=True,
                        help_text="When the upload session was created",
                    ),
                ),
                (
                    "expires_at",
                    models.DateTimeField(
                        db_index=True,
                        help_text="When this session expires (24-hour TTL)",
                    ),
                ),
                (
                    "completed_at",
                    models.DateTimeField(
                        blank=True, help_text="When the upload was completed", null=True
                    ),
                ),
                (
                    "last_activity_at",
                    models.DateTimeField(
                        auto_now=True, help_text="Last time a chunk was received"
                    ),
                ),
                (
                    "error_message",
                    models.TextField(
                        blank=True, help_text="Error message if upload failed"
                    ),
                ),
                (
                    "final_file_path",
                    models.CharField(
                        blank=True,
                        help_text="Path to final assembled file",
                        max_length=500,
                    ),
                ),
            ],
            options={
                "verbose_name": "Upload Session",
                "verbose_name_plural": "Upload Sessions",
                "db_table": "upload_sessions",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="UserBehaviorProfile",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "preferred_pages",
                    models.JSONField(
                        default=dict, help_text="Page URLs and visit frequency"
                    ),
                ),
                (
                    "common_paths",
                    models.JSONField(default=list, help_text="Common navigation paths"),
                ),
                ("session_duration_avg", models.FloatField(default=0.0)),
                (
                    "click_patterns",
                    models.JSONField(
                        default=dict, help_text="Common click locations and elements"
                    ),
                ),
                (
                    "preferred_device_type",
                    models.CharField(
                        choices=[
                            ("desktop", "Desktop"),
                            ("mobile", "Mobile"),
                            ("tablet", "Tablet"),
                        ],
                        default="desktop",
                        max_length=20,
                    ),
                ),
                ("timezone_preference", models.CharField(default="UTC", max_length=50)),
                ("language_preference", models.CharField(default="en", max_length=10)),
                (
                    "exploration_tendency",
                    models.FloatField(
                        default=0.5,
                        help_text="0.0 = routine user, 1.0 = exploratory user",
                        validators=[
                            django.core.validators.MinValueValidator(0.0),
                            django.core.validators.MaxValueValidator(1.0),
                        ],
                    ),
                ),
                (
                    "task_completion_rate",
                    models.FloatField(
                        default=0.0,
                        validators=[
                            django.core.validators.MinValueValidator(0.0),
                            django.core.validators.MaxValueValidator(1.0),
                        ],
                    ),
                ),
                (
                    "feature_adoption_rate",
                    models.FloatField(
                        default=0.0,
                        validators=[
                            django.core.validators.MinValueValidator(0.0),
                            django.core.validators.MaxValueValidator(1.0),
                        ],
                    ),
                ),
                ("preferred_content_types", models.JSONField(default=list)),
                ("interaction_frequency", models.JSONField(default=dict)),
                (
                    "similarity_vector",
                    models.JSONField(
                        default=list, help_text="Vector for similarity calculations"
                    ),
                ),
                ("last_updated", models.DateTimeField(auto_now=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
            ],
            options={
                "db_table": "core_user_behavior_profile",
            },
        ),
        migrations.CreateModel(
            name="UserDevice",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "device_id",
                    models.CharField(
                        db_index=True,
                        help_text="Unique device identifier",
                        max_length=255,
                        unique=True,
                    ),
                ),
                (
                    "device_type",
                    models.CharField(
                        choices=[
                            ("phone", "Mobile Phone"),
                            ("tablet", "Tablet"),
                            ("laptop", "Laptop"),
                            ("desktop", "Desktop"),
                        ],
                        help_text="Device type",
                        max_length=20,
                    ),
                ),
                (
                    "priority",
                    models.IntegerField(
                        default=50,
                        help_text="Conflict resolution priority (higher = more authoritative)",
                    ),
                ),
                ("device_name", models.CharField(blank=True, max_length=255)),
                ("os_type", models.CharField(blank=True, max_length=50)),
                ("os_version", models.CharField(blank=True, max_length=50)),
                ("app_version", models.CharField(blank=True, max_length=50)),
                ("last_seen", models.DateTimeField(auto_now=True)),
                ("is_active", models.BooleanField(default=True)),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "verbose_name": "User Device",
                "verbose_name_plural": "User Devices",
                "db_table": "user_device",
                "ordering": ["-last_seen"],
            },
        ),
        migrations.CreateModel(
            name="UserScope",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "cdtz",
                    models.DateTimeField(
                        default=apps.peoples.models.base_model.now,
                        help_text="When this record was created",
                        verbose_name="Created date",
                    ),
                ),
                (
                    "mdtz",
                    models.DateTimeField(
                        default=apps.peoples.models.base_model.now,
                        help_text="When this record was last modified",
                        verbose_name="Modified date",
                    ),
                ),
                (
                    "ctzoffset",
                    models.IntegerField(
                        default=-1,
                        help_text="User's timezone offset in minutes",
                        verbose_name="Timezone offset",
                    ),
                ),
                (
                    "selected_clients",
                    models.JSONField(
                        default=list,
                        encoder=django.core.serializers.json.DjangoJSONEncoder,
                        help_text="Array of client IDs for portfolio view",
                        verbose_name="Selected Clients",
                    ),
                ),
                (
                    "selected_sites",
                    models.JSONField(
                        default=list,
                        encoder=django.core.serializers.json.DjangoJSONEncoder,
                        help_text="Array of site/BU IDs for filtering",
                        verbose_name="Selected Sites",
                    ),
                ),
                (
                    "time_range",
                    models.CharField(
                        choices=[
                            ("TODAY", "Today"),
                            ("24H", "Last 24 Hours"),
                            ("7D", "Last 7 Days"),
                            ("30D", "Last 30 Days"),
                            ("CUSTOM", "Custom Range"),
                        ],
                        default="TODAY",
                        max_length=20,
                        verbose_name="Time Range",
                    ),
                ),
                (
                    "date_from",
                    models.DateField(
                        blank=True,
                        help_text="Start date for custom range",
                        null=True,
                        verbose_name="Custom Date From",
                    ),
                ),
                (
                    "date_to",
                    models.DateField(
                        blank=True,
                        help_text="End date for custom range",
                        null=True,
                        verbose_name="Custom Date To",
                    ),
                ),
                (
                    "recently_viewed",
                    models.JSONField(
                        default=list,
                        encoder=django.core.serializers.json.DjangoJSONEncoder,
                        help_text="Recently accessed pages/entities",
                        verbose_name="Recently Viewed",
                    ),
                ),
                (
                    "last_view_url",
                    models.CharField(
                        blank=True,
                        default="",
                        help_text="Last page user was viewing",
                        max_length=500,
                        verbose_name="Last View URL",
                    ),
                ),
            ],
            options={
                "verbose_name": "User Scope",
                "verbose_name_plural": "User Scopes",
                "db_table": "user_scope",
                "ordering": ["mdtz"],
                "abstract": False,
            },
        ),
        migrations.CreateModel(
            name="UserSimilarity",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "similarity_score",
                    models.FloatField(
                        help_text="Cosine similarity score (-1.0 to 1.0)",
                        validators=[
                            django.core.validators.MinValueValidator(-1.0),
                            django.core.validators.MaxValueValidator(1.0),
                        ],
                    ),
                ),
                (
                    "calculation_method",
                    models.CharField(default="cosine_similarity", max_length=50),
                ),
                ("features_used", models.JSONField(default=list)),
                ("calculated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "db_table": "core_user_similarity",
            },
        ),
        migrations.CreateModel(
            name="AdminHelpTopic",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True,
                        help_text="When this record was created",
                        verbose_name="Created at",
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(
                        auto_now=True,
                        help_text="When this record was last modified",
                        verbose_name="Updated at",
                    ),
                ),
                (
                    "category",
                    models.CharField(
                        choices=[
                            ("command_center", "Command Center"),
                            ("workflows", "Workflows & Automation"),
                            ("approvals", "Approvals & Requests"),
                            ("views", "Views & Filters"),
                            ("reports", "Reports & Analytics"),
                            ("notifications", "Notifications & Alerts"),
                            ("scheduling", "Scheduling & Calendar"),
                            ("team", "Team & Collaboration"),
                            ("settings", "Settings & Configuration"),
                        ],
                        db_index=True,
                        help_text="Which area of the admin this feature belongs to",
                        max_length=50,
                        verbose_name="Category",
                    ),
                ),
                (
                    "feature_name",
                    models.CharField(
                        help_text="User-friendly name (e.g., 'One-Click Actions' not 'Playbooks')",
                        max_length=200,
                        verbose_name="Feature Name",
                    ),
                ),
                (
                    "short_description",
                    models.TextField(
                        help_text="1-2 sentence summary in plain English",
                        max_length=500,
                        verbose_name="Short Description",
                    ),
                ),
                (
                    "detailed_explanation",
                    models.TextField(
                        help_text="Full explanation without jargon - write like explaining to a friend",
                        verbose_name="Detailed Explanation",
                    ),
                ),
                (
                    "use_cases",
                    django.contrib.postgres.fields.ArrayField(
                        base_field=models.TextField(),
                        blank=True,
                        default=list,
                        help_text="Real-world examples of when to use this feature",
                        size=None,
                        verbose_name="Use Cases",
                    ),
                ),
                (
                    "advantages",
                    django.contrib.postgres.fields.ArrayField(
                        base_field=models.TextField(),
                        blank=True,
                        default=list,
                        help_text="Benefits and advantages of using this feature",
                        size=None,
                        verbose_name="Advantages",
                    ),
                ),
                (
                    "how_to_use",
                    models.TextField(
                        blank=True,
                        help_text="Step-by-step instructions in simple language",
                        verbose_name="How to Use",
                    ),
                ),
                (
                    "video_url",
                    models.URLField(
                        blank=True,
                        help_text="Optional link to video tutorial",
                        validators=[django.core.validators.URLValidator()],
                        verbose_name="Video Tutorial URL",
                    ),
                ),
                (
                    "keywords",
                    django.contrib.postgres.fields.ArrayField(
                        base_field=models.CharField(max_length=100),
                        blank=True,
                        default=list,
                        help_text="Search keywords and alternative terms",
                        size=None,
                        verbose_name="Keywords",
                    ),
                ),
                (
                    "difficulty_level",
                    models.CharField(
                        choices=[
                            ("beginner", "Beginner - Easy to learn"),
                            ("intermediate", "Intermediate - Some experience needed"),
                            ("advanced", "Advanced - For power users"),
                        ],
                        db_index=True,
                        default="beginner",
                        max_length=20,
                        verbose_name="Difficulty Level",
                    ),
                ),
                (
                    "view_count",
                    models.PositiveIntegerField(
                        default=0,
                        help_text="How many times this help topic has been viewed",
                        verbose_name="View Count",
                    ),
                ),
                (
                    "helpful_count",
                    models.PositiveIntegerField(
                        default=0,
                        help_text="How many users found this helpful",
                        verbose_name="Helpful Count",
                    ),
                ),
                (
                    "is_active",
                    models.BooleanField(
                        db_index=True,
                        default=True,
                        help_text="Whether this help topic is currently shown to users",
                        verbose_name="Is Active",
                    ),
                ),
                (
                    "search_vector",
                    django.contrib.postgres.search.SearchVectorField(
                        editable=False, null=True
                    ),
                ),
                (
                    "tenant",
                    models.ForeignKey(
                        blank=True,
                        help_text="Tenant that owns this record",
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        to="tenants.tenant",
                    ),
                ),
            ],
            options={
                "verbose_name": "Admin Help Topic",
                "verbose_name_plural": "Admin Help Topics",
                "ordering": ["-view_count", "category", "feature_name"],
            },
        ),
    ]
