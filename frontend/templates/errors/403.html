{% extends "globals/base_accessible.html" %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "Access Denied" %} (403) - {{ block.super }}{% endblock title %}

{% block extra_css %}
{{ block.super }}
<link href="{{ static('css/design-system.css') }}" rel="stylesheet">
<style>
  .error-page {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, var(--yt-warning-50) 0%, var(--yt-info-50) 100%);
    padding: var(--yt-space-4);
  }

  .error-container {
    max-width: 600px;
    width: 100%;
    text-align: center;
    background: var(--yt-bg-surface);
    border-radius: var(--yt-radius-2xl);
    padding: var(--yt-space-8);
    box-shadow: var(--yt-shadow-xl);
  }

  .error-illustration {
    width: 120px;
    height: 120px;
    margin: 0 auto var(--yt-space-6);
    background: var(--yt-warning-100);
    border-radius: var(--yt-radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .error-icon {
    font-size: 3rem;
    color: var(--yt-warning-600);
  }

  .error-title {
    font-size: var(--yt-text-2xl);
    font-weight: var(--yt-font-semibold);
    color: var(--yt-text-primary);
    margin: 0 0 var(--yt-space-4) 0;
  }

  .error-message {
    font-size: var(--yt-text-base);
    color: var(--yt-text-secondary);
    margin: 0 0 var(--yt-space-6) 0;
    line-height: var(--yt-leading-relaxed);
  }

  .error-actions {
    display: flex;
    gap: var(--yt-space-4);
    justify-content: center;
    flex-wrap: wrap;
  }

  .yt-button {
    display: inline-flex;
    align-items: center;
    gap: var(--yt-space-2);
    padding: var(--yt-space-3) var(--yt-space-6);
    border-radius: var(--yt-radius-lg);
    font-size: var(--yt-text-sm);
    font-weight: var(--yt-font-medium);
    text-decoration: none;
    transition: all var(--yt-duration-200) var(--yt-ease-in-out);
    border: none;
    cursor: pointer;
  }

  .yt-button-primary {
    background: var(--yt-primary-500);
    color: var(--yt-text-inverse);
  }

  .yt-button-primary:hover {
    background: var(--yt-primary-600);
  }

  .yt-button-secondary {
    background: var(--yt-gray-500);
    color: var(--yt-text-inverse);
  }

  .yt-button-secondary:hover {
    background: var(--yt-gray-600);
  }

  @media (max-width: 640px) {
    .error-actions { flex-direction: column; }
    .yt-button { width: 100%; justify-content: center; }
  }
</style>
{% endblock extra_css %}

{% block content %}
<div class="error-page">
  <div class="error-container">

    <div class="error-illustration">
      <i class="material-icons error-icon">block</i>
    </div>

    <h1 class="error-title">{% trans "Access Denied" %}</h1>
    <p class="error-message">
      {{ user_message|default:_("You don't have permission to access this resource. Please contact your administrator if you believe this is an error.") }}
    </p>

    <div class="error-actions">
      {% if not request.user.is_authenticated %}
      <a href="{% url 'login' %}" class="yt-button yt-button-primary">
        <i class="material-icons" aria-hidden="true">login</i>
        Login
      </a>
      {% endif %}
      <button class="yt-button yt-button-secondary" onclick="history.back()">
        <i class="material-icons" aria-hidden="true">arrow_back</i>
        Go Back
      </button>
      <a href="/" class="yt-button yt-button-secondary">
        <i class="material-icons" aria-hidden="true">home</i>
        Home
      </a>
    </div>

  </div>
</div>

<div class="yt-sr-only" aria-live="assertive" aria-atomic="true">
  Access denied. Please login or contact your administrator for access.
</div>
{% endblock content %}

{% block extra_scripts %}
{{ block.super }}
<script>
setTimeout(() => {
  const announcer = document.querySelector('[aria-live="assertive"]');
  if (announcer) {
    announcer.textContent = 'Access denied. Please check your permissions or contact support.';
  }
}, 1000);
</script>
{% endblock extra_scripts %}
